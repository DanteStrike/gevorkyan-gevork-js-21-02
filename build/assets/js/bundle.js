!function n(o,i,a){function u(t,e){if(!i[t]){if(!o[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(l)return l(t,!0);throw(r=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",r}r=i[t]={exports:{}},o[t][0].call(r.exports,function(e){return u(o[t][1][e]||e)},r,r.exports,n,o,i,a)}return i[t].exports}for(var l="function"==typeof require&&require,e=0;e<a.length;e++)u(a[e]);return u}({1:[function(e,t,r){t.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},t.exports.default=t.exports,t.exports.__esModule=!0},{}],2:[function(e,t,r){function l(e,t,r,n,o,i,a){try{var u=e[i](a),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}t.exports=function(u){return function(){var e=this,a=arguments;return new Promise(function(t,r){var n=u.apply(e,a);function o(e){l(n,t,r,o,i,"next",e)}function i(e){l(n,t,r,o,i,"throw",e)}o(void 0)})}},t.exports.default=t.exports,t.exports.__esModule=!0},{}],3:[function(e,t,r){t.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t.exports.default=t.exports,t.exports.__esModule=!0},{}],4:[function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}t.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e},t.exports.default=t.exports,t.exports.__esModule=!0},{}],5:[function(e,t,r){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t.exports.default=t.exports,t.exports.__esModule=!0,n(e)}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},{}],6:[function(e,t,r){var n=e("./setPrototypeOf.js");t.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)},t.exports.default=t.exports,t.exports.__esModule=!0},{"./setPrototypeOf.js":9}],7:[function(e,t,r){t.exports=function(e){return e&&e.__esModule?e:{default:e}},t.exports.default=t.exports,t.exports.__esModule=!0},{}],8:[function(e,t,r){var n=e("@babel/runtime/helpers/typeof").default,o=e("./assertThisInitialized.js");t.exports=function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return o(e)},t.exports.default=t.exports,t.exports.__esModule=!0},{"./assertThisInitialized.js":1,"@babel/runtime/helpers/typeof":10}],9:[function(e,r,t){function n(e,t){return r.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r.exports.default=r.exports,r.exports.__esModule=!0,n(e,t)}r.exports=n,r.exports.default=r.exports,r.exports.__esModule=!0},{}],10:[function(e,t,r){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=n=function(e){return typeof e}:t.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t.exports.default=t.exports,t.exports.__esModule=!0,n(e)}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},{}],11:[function(e,t,r){t.exports=e("regenerator-runtime")},{"regenerator-runtime":12}],12:[function(e,t,r){t=function(a){"use strict";var l,e=Object.prototype,s=e.hasOwnProperty,t="function"==typeof Symbol?Symbol:{},n=t.iterator||"@@iterator",r=t.asyncIterator||"@@asyncIterator",o=t.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(e){i=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o,i,a,u,t=t&&t.prototype instanceof b?t:b,t=Object.create(t.prototype),n=new O(n||[]);return t._invoke=(o=e,i=r,a=n,u=f,function(e,t){if(u===h)throw new Error("Generator is already running");if(u===d){if("throw"===e)throw t;return R()}for(a.method=e,a.arg=t;;){var r=a.delegate;if(r){var n=function e(t,r){var n=t.iterator[r.method];if(n===l){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=l,e(t,r),"throw"===r.method))return m;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var n=c(n,t.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,m;n=n.arg;if(!n)return r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m;{if(!n.done)return n;r[t.resultName]=n.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=l)}r.delegate=null;return m}(r,a);if(n){if(n===m)continue;return n}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(u===f)throw u=d,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);u=h;n=c(o,i,a);if("normal"===n.type){if(u=a.done?d:p,n.arg!==m)return{value:n.arg,done:a.done}}else"throw"===n.type&&(u=d,a.method="throw",a.arg=n.arg)}}),t}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}a.wrap=u;var f="suspendedStart",p="suspendedYield",h="executing",d="completed",m={};function b(){}function y(){}function g(){}var v={};i(v,n,function(){return this});t=Object.getPrototypeOf,t=t&&t(t(C([])));t&&t!==e&&s.call(t,n)&&(v=t);var _=g.prototype=b.prototype=Object.create(v);function x(e){["next","throw","return"].forEach(function(t){i(e,t,function(e){return this._invoke(t,e)})})}function w(a,u){var t;this._invoke=function(r,n){function e(){return new u(function(e,t){!function t(e,r,n,o){e=c(a[e],a,r);if("throw"!==e.type){var i=e.arg;return(r=i.value)&&"object"==typeof r&&s.call(r,"__await")?u.resolve(r.__await).then(function(e){t("next",e,n,o)},function(e){t("throw",e,n,o)}):u.resolve(r).then(function(e){i.value=e,n(i)},function(e){return t("throw",e,n,o)})}o(e.arg)}(r,n,e,t)})}return t=t?t.then(e,e):e()}}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function C(t){if(t){var e=t[n];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,e=function e(){for(;++r<t.length;)if(s.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=l,e.done=!0,e};return e.next=e}}return{next:R}}function R(){return{value:l,done:!0}}return i(_,"constructor",y.prototype=g),i(g,"constructor",y),y.displayName=i(g,o,"GeneratorFunction"),a.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,i(e,o,"GeneratorFunction")),e.prototype=Object.create(_),e},a.awrap=function(e){return{__await:e}},x(w.prototype),i(w.prototype,r,function(){return this}),a.AsyncIterator=w,a.async=function(e,t,r,n,o){void 0===o&&(o=Promise);var i=new w(u(e,t,r,n),o);return a.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},x(_),i(_,o,"Generator"),i(_,n,function(){return this}),i(_,"toString",function(){return"[object Generator]"}),a.keys=function(r){var e,n=[];for(e in r)n.push(e);return n.reverse(),function e(){for(;n.length;){var t=n.pop();if(t in r)return e.value=t,e.done=!1,e}return e.done=!0,e}},a.values=C,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method="next",this.arg=l,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&s.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=l)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var n=this;function e(e,t){return i.type="throw",i.arg=r,n.next=e,t&&(n.method="next",n.arg=l),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var o=this.tryEntries[t],i=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var a=s.call(o,"catchLoc"),u=s.call(o,"finallyLoc");if(a&&u){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;0<=r;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&s.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}var i=(o=o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc?null:o)?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n,o=r.completion;return"throw"===o.type&&(n=o.arg,k(r)),n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:C(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=l),m}},a}("object"==typeof t?t.exports:{});try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},{}],13:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/classCallCheck")),i=n(e("@babel/runtime/helpers/createClass"));r.default=function(){function t(e){(0,o.default)(this,t),this.id=e.id,this.title=e.title,this.url=e.url}return(0,i.default)(t,null,[{key:"parseImg",value:function(e){return new t(e)}}]),t}()},{"@babel/runtime/helpers/classCallCheck":3,"@babel/runtime/helpers/createClass":4,"@babel/runtime/helpers/interopRequireDefault":7}],14:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/classCallCheck")),i=n(e("@babel/runtime/helpers/createClass")),a=e("../utils/utils");r.default=function(){function e(){if((0,o.default)(this,e),(this instanceof e?this.constructor:void 0)===e)throw new Error("Can't instantiate AbstractComponent, only concrete one.");this._element=null}return(0,i.default)(e,[{key:"getElement",value:function(){return this._element||(this._element=(0,a.createElement)(this._getTemplate())),this._element}},{key:"removeElement",value:function(){this._element=null}},{key:"_getTemplate",value:function(){throw new Error("Abstract method not implemented: getTemplate")}}]),e}()},{"../utils/utils":26,"@babel/runtime/helpers/classCallCheck":3,"@babel/runtime/helpers/createClass":4,"@babel/runtime/helpers/interopRequireDefault":7}],15:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=n(e("@babel/runtime/helpers/classCallCheck")),a=n(e("@babel/runtime/helpers/createClass")),u=n(e("@babel/runtime/helpers/inherits")),o=n(e("@babel/runtime/helpers/possibleConstructorReturn")),l=n(e("@babel/runtime/helpers/getPrototypeOf"));function s(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,l.default)(r);return t=n?(e=(0,l.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,o.default)(this,t)}}e=function(e){(0,u.default)(o,e);var n=s(o);function o(e){var t=e.url,r=void 0===t?"https://via.placeholder.com/260x200":t,t=e.title,e=void 0===t?"image":t;return(0,i.default)(this,o),(t=n.call(this))._url=r,t._title=e,t}return(0,a.default)(o,[{key:"_getTemplate",value:function(){return'<li class="img-list__item">\n              <img class="image" src="'.concat(this._url,'" alt="').concat(this._title,'" width="260" height="200">\n            </li>')}}]),o}(n(e("./abstract-component")).default);r.default=e},{"./abstract-component":14,"@babel/runtime/helpers/classCallCheck":3,"@babel/runtime/helpers/createClass":4,"@babel/runtime/helpers/getPrototypeOf":5,"@babel/runtime/helpers/inherits":6,"@babel/runtime/helpers/interopRequireDefault":7,"@babel/runtime/helpers/possibleConstructorReturn":8}],16:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/classCallCheck")),i=n(e("@babel/runtime/helpers/createClass")),a=n(e("@babel/runtime/helpers/inherits")),u=n(e("@babel/runtime/helpers/possibleConstructorReturn")),l=n(e("@babel/runtime/helpers/getPrototypeOf"));function s(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,l.default)(r);return t=n?(e=(0,l.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,u.default)(this,t)}}e=function(e){(0,a.default)(r,e);var t=s(r);function r(){return(0,o.default)(this,r),t.call(this)}return(0,i.default)(r,[{key:"_getTemplate",value:function(){return'<ul class="img-list work-area__img-list"></ul>'}}]),r}(n(e("./abstract-component")).default);r.default=e},{"./abstract-component":14,"@babel/runtime/helpers/classCallCheck":3,"@babel/runtime/helpers/createClass":4,"@babel/runtime/helpers/getPrototypeOf":5,"@babel/runtime/helpers/inherits":6,"@babel/runtime/helpers/interopRequireDefault":7,"@babel/runtime/helpers/possibleConstructorReturn":8}],17:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/classCallCheck")),i=n(e("@babel/runtime/helpers/createClass")),a=n(e("@babel/runtime/helpers/inherits")),u=n(e("@babel/runtime/helpers/possibleConstructorReturn")),l=n(e("@babel/runtime/helpers/getPrototypeOf")),n=n(e("./abstract-component")),s=e("../enum/enum");function c(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,l.default)(r);return t=n?(e=(0,l.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,u.default)(this,t)}}n=function(e){(0,a.default)(n,e);var r=c(n);function n(e){var t,e=e.onImageSubmit,e=void 0===e?function(){}:e;return(0,o.default)(this,n),(t=r.call(this))._onImageSubmit=e,t._inputName=t.getElement().querySelector("#img-uploader__input-name"),t._inputImg=t.getElement().querySelector("#img-uploader__input-img"),t.getElement().addEventListener("click",function(e){return t._onFormClick(e)}),t}return(0,i.default)(n,[{key:"block",value:function(){this.getElement().classList.add("img-uploader--block")}},{key:"unBlock",value:function(){this.getElement().classList.remove("img-uploader--block")}},{key:"_onFormClick",value:function(e){var t=e.currentTarget;e.target.nodeName===s.TagName.BUTTON&&t.reportValidity()&&(e.preventDefault(),t=new FormData(t),this._onImageSubmit(t),this._inputName.value="",this._inputImg.value="")}},{key:"_getTemplate",value:function(){return'<form class="img-uploader work-area__img-uploader" method="post" action="#">\n                <label class="img-uploader__label" for="img-uploader__input-name">Название изображения ([a-zA-Z0-9]):</label>\n                <input class="img-uploader__input" type="text" id="img-uploader__input-name" name="name" pattern="^[a-zA-Z0-9]+$">\n                <label class="img-uploader__label" for="img-uploader__input-img">Выберите изборажение:</label>\n                <input class="img-uploader__input" type="file" id="img-uploader__input-img" name="image" accept="image/*" required>\n                <button class="img-uploader__btn" type="submit">Отправить</button>\n              </form>'}}]),n}(n.default);r.default=n},{"../enum/enum":22,"./abstract-component":14,"@babel/runtime/helpers/classCallCheck":3,"@babel/runtime/helpers/createClass":4,"@babel/runtime/helpers/getPrototypeOf":5,"@babel/runtime/helpers/inherits":6,"@babel/runtime/helpers/interopRequireDefault":7,"@babel/runtime/helpers/possibleConstructorReturn":8}],18:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/classCallCheck")),i=n(e("@babel/runtime/helpers/createClass")),a=n(e("@babel/runtime/helpers/inherits")),u=n(e("@babel/runtime/helpers/possibleConstructorReturn")),l=n(e("@babel/runtime/helpers/getPrototypeOf"));function s(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=(0,l.default)(r);return t=n?(e=(0,l.default)(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),(0,u.default)(this,t)}}e=function(e){(0,a.default)(r,e);var t=s(r);function r(){var e;return(0,o.default)(this,r),(e=t.call(this))._pin=e.getElement().querySelector(".loader__pin"),e._req=null,e._deg=0,e._reset(),e}return(0,i.default)(r,[{key:"startAnimation",value:function(){var e=this;this._pin.style.display="";function t(){e._deg=360===e._deg?0:e._deg+5,e._pin.style.transform="rotateY(".concat(e._deg,"deg)"),e._req=requestAnimationFrame(t)}this._req=requestAnimationFrame(t)}},{key:"stopAnimation",value:function(){null!==this._req&&cancelAnimationFrame(this._req),this._reset()}},{key:"_reset",value:function(){this._pin.style.display="none",this._pin.style.transform="",this._req=null,this._deg=0}},{key:"_getTemplate",value:function(){return'<div class="loader"><div class="loader__pin"></div></div>'}}]),r}(n(e("./abstract-component")).default);r.default=e},{"./abstract-component":14,"@babel/runtime/helpers/classCallCheck":3,"@babel/runtime/helpers/createClass":4,"@babel/runtime/helpers/getPrototypeOf":5,"@babel/runtime/helpers/inherits":6,"@babel/runtime/helpers/interopRequireDefault":7,"@babel/runtime/helpers/possibleConstructorReturn":8}],19:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n={storage:localStorage,key:"imgsSentToImgBB",initialData:[]};r.default=n},{}],20:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default={endPoint:"https://api.imgbb.com/1",apiKey:"938ac1eb51cbc75dc7476edde1350b65"}},{}],21:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/classCallCheck")),i=n(e("@babel/runtime/helpers/createClass")),a=e("../utils/utils"),u=n(e("../components/img-uploader")),l=n(e("../components/img-list")),s=n(e("../components/img-item")),c=e("../enum/enum"),f=n(e("../components/loader")),e=function(){function n(e){var t=this,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){};(0,o.default)(this,n),this._container=e,this._imgUploader=new u.default({onImageSubmit:function(e){t._onImageSubmit(),r(e)}}),this._loader=new f.default,this._imgList=new l.default,this._init()}return(0,i.default)(n,[{key:"updateImages",value:function(e){var t=this;this._imgList.getElement().innerHTML="",e.forEach(function(e){(0,a.render)(t._imgList.getElement(),new s.default(e).getElement(),c.Position.BEFOREEND)}),this.unlock()}},{key:"unlock",value:function(){this._imgUploader.unBlock(),this._loader.stopAnimation()}},{key:"_init",value:function(){(0,a.render)(this._container,this._imgUploader.getElement(),c.Position.BEFOREEND),(0,a.render)(this._container,this._loader.getElement(),c.Position.BEFOREEND),(0,a.render)(this._container,this._imgList.getElement(),c.Position.BEFOREEND)}},{key:"_onImageSubmit",value:function(){this._imgUploader.block(),this._loader.startAnimation()}}]),n}();r.default=e},{"../components/img-item":15,"../components/img-list":16,"../components/img-uploader":17,"../components/loader":18,"../enum/enum":22,"../utils/utils":26,"@babel/runtime/helpers/classCallCheck":3,"@babel/runtime/helpers/createClass":4,"@babel/runtime/helpers/interopRequireDefault":7}],22:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TagName=r.Position=r.Method=void 0;r.Method={GET:"get",POST:"post"};r.Position={AFTERBEGIN:"afterbegin",BEFOREEND:"beforeend"};r.TagName={INPUT:"INPUT",BUTTON:"BUTTON",LABEL:"LABEL"}},{}],23:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault"),o=n(e("@babel/runtime/regenerator")),i=n(e("@babel/runtime/helpers/asyncToGenerator")),a=n(e("./server/api")),u=n(e("./configs/img-b-b-server-config")),l=n(e("./controllers/gallery-controller")),s=e("./utils/utils"),c=n(e("./configs/images-store-config")),e=n(e("./storage/arr-store")),f=new a.default(u.default),p=new e.default(c.default),c=function(){var t=(0,i.default)(o.default.mark(function e(t){var r,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.get("image"),e.next=3,(0,s.encodeToBase64)(r);case 3:return r=e.sent,t.set("image",r.replace(/^.*,/,"")),e.next=7,f.uploadImg(t);case 7:if(n=e.sent,p.data.every(function(e){return e.id!==n.id}))return p.push(n),h.updateImages(p.data),e.abrupt("return");e.next=12;break;case 12:alert("Image in gallery already!!!"),h.unlock();case 14:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}(),h=new l.default(document.querySelector("#root"),c);h.updateImages(p.data)},{"./configs/images-store-config":19,"./configs/img-b-b-server-config":20,"./controllers/gallery-controller":21,"./server/api":24,"./storage/arr-store":25,"./utils/utils":26,"@babel/runtime/helpers/asyncToGenerator":2,"@babel/runtime/helpers/interopRequireDefault":7,"@babel/runtime/regenerator":11}],24:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/classCallCheck")),i=n(e("@babel/runtime/helpers/createClass")),a=e("../enum/enum"),u=e("../utils/utils"),l=n(e("../adapters/img-bb"));r.default=function(){function r(e){var t=e.endPoint,e=e.apiKey;(0,o.default)(this,r),this._endPoint=t,this._apiKey=e}return(0,i.default)(r,[{key:"uploadImg",value:function(e){return e.set("key",this._apiKey),this._load({url:"upload",method:a.Method.POST,timeout:1e4,body:e}).then(u.toJSON).then(function(e){return l.default.parseImg(e.data)})}},{key:"_load",value:function(e){var t=e.url,r=e.method,n=void 0===r?a.Method.GET:r,o=e.body,r=void 0===o?null:o,o=e.headers,o=void 0===o?new Headers:o,e=e.timeout,e=void 0===e?5e3:e;return fetch("".concat(this._endPoint,"/").concat(t),{method:n,body:r,headers:o,timeout:e}).then(function(e){if(200<=e.status&&e.status<300)return e;throw new Error("".concat(e.status,": ").concat(e.statusText))}).catch(function(e){throw e})}}]),r}()},{"../adapters/img-bb":13,"../enum/enum":22,"../utils/utils":26,"@babel/runtime/helpers/classCallCheck":3,"@babel/runtime/helpers/createClass":4,"@babel/runtime/helpers/interopRequireDefault":7}],25:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/classCallCheck")),i=n(e("@babel/runtime/helpers/createClass"));r.default=function(){function n(e){var t=e.storage,r=e.key,e=e.initialData;(0,o.default)(this,n),this._storage=t,this._key=r,this.isInStorage||this._storage.setItem(this._key,JSON.stringify(e)),this._data=JSON.parse(this._storage.getItem(this._key))}return(0,i.default)(n,[{key:"isInStorage",get:function(){return null!==this._storage.getItem(this._key)}},{key:"data",get:function(){return this._data.map(function(e){return Object.assign({},e)})}},{key:"push",value:function(e){this._data.push(e),this._save()}},{key:"_save",value:function(){this._storage.setItem(this._key,JSON.stringify(this._data))}}]),n}()},{"@babel/runtime/helpers/classCallCheck":3,"@babel/runtime/helpers/createClass":4,"@babel/runtime/helpers/interopRequireDefault":7}],26:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.encodeToBase64=r.unmount=r.render=r.createElement=r.toJSON=void 0;var n=e("../enum/enum");r.toJSON=function(e){return e.json()};r.createElement=function(e){var t=document.createElement("div");return t.innerHTML=e,t.firstChild};r.render=function(e,t,r){switch(r){case n.Position.AFTERBEGIN:e.prepend(t);break;case n.Position.BEFOREEND:e.append(t)}};r.unmount=function(e){e&&e.remove()};r.encodeToBase64=function(n){return new Promise(function(e,t){var r=new FileReader;r.readAsDataURL(n),r.onload=function(){e(r.result)},r.onerror=function(){t(r.error)}})}},{"../enum/enum":22}]},{},[23]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQuanMiLCJub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9hc3luY1RvR2VuZXJhdG9yLmpzIiwibm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2suanMiLCJub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcy5qcyIsIm5vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2dldFByb3RvdHlwZU9mLmpzIiwibm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMuanMiLCJub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbnRlcm9wUmVxdWlyZURlZmF1bHQuanMiLCJub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuLmpzIiwibm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvc2V0UHJvdG90eXBlT2YuanMiLCJub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy90eXBlb2YuanMiLCJub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3IvaW5kZXguanMiLCJub2RlX21vZHVsZXMvcmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIiwic3JjL2pzL2FkYXB0ZXJzL2ltZy1iYi5qcyIsInNyYy9qcy9jb21wb25lbnRzL2Fic3RyYWN0LWNvbXBvbmVudC5qcyIsInNyYy9qcy9jb21wb25lbnRzL2ltZy1pdGVtLmpzIiwic3JjL2pzL2NvbXBvbmVudHMvaW1nLWxpc3QuanMiLCJzcmMvanMvY29tcG9uZW50cy9pbWctdXBsb2FkZXIuanMiLCJzcmMvanMvY29tcG9uZW50cy9sb2FkZXIuanMiLCJzcmMvanMvY29uZmlncy9pbWFnZXMtc3RvcmUtY29uZmlnLmpzIiwic3JjL2pzL2NvbmZpZ3MvaW1nLWItYi1zZXJ2ZXItY29uZmlnLmpzIiwic3JjL2pzL2NvbnRyb2xsZXJzL2dhbGxlcnktY29udHJvbGxlci5qcyIsInNyYy9qcy9lbnVtL2VudW0uanMiLCJzcmMvanMvaW5kZXguanMiLCJzcmMvanMvc2VydmVyL2FwaS5qcyIsInNyYy9qcy9zdG9yYWdlL2Fyci1zdG9yZS5qcyIsInNyYy9qcy91dGlscy91dGlscy5qcyJdLCJuYW1lcyI6WyJyIiwiZSIsIm4iLCJ0IiwibyIsImkiLCJmIiwiYyIsInJlcXVpcmUiLCJ1IiwiYSIsIkVycm9yIiwiY29kZSIsInAiLCJleHBvcnRzIiwiY2FsbCIsImxlbmd0aCIsIjEiLCJtb2R1bGUiLCJzZWxmIiwiUmVmZXJlbmNlRXJyb3IiLCJfX2VzTW9kdWxlIiwiYXN5bmNHZW5lcmF0b3JTdGVwIiwiZ2VuIiwicmVzb2x2ZSIsInJlamVjdCIsIl9uZXh0IiwiX3Rocm93Iiwia2V5IiwiYXJnIiwiaW5mbyIsInZhbHVlIiwiZXJyb3IiLCJkb25lIiwiUHJvbWlzZSIsInRoZW4iLCJmbiIsInRoaXMiLCJhcmdzIiwiYXJndW1lbnRzIiwiYXBwbHkiLCJlcnIiLCJ1bmRlZmluZWQiLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiX2RlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImRlc2NyaXB0b3IiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsInByb3RvdHlwZSIsIl9nZXRQcm90b3R5cGVPZiIsInNldFByb3RvdHlwZU9mIiwiZ2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJzdWJDbGFzcyIsInN1cGVyQ2xhc3MiLCJjcmVhdGUiLCJjb25zdHJ1Y3RvciIsIm9iaiIsImRlZmF1bHQiLCJfdHlwZW9mIiwiYXNzZXJ0VGhpc0luaXRpYWxpemVkIiwiX3NldFByb3RvdHlwZU9mIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJydW50aW1lIiwiT3AiLCJoYXNPd24iLCJoYXNPd25Qcm9wZXJ0eSIsIiRTeW1ib2wiLCJpdGVyYXRvclN5bWJvbCIsImFzeW5jSXRlcmF0b3JTeW1ib2wiLCJhc3luY0l0ZXJhdG9yIiwidG9TdHJpbmdUYWdTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsImRlZmluZSIsIndyYXAiLCJpbm5lckZuIiwib3V0ZXJGbiIsInRyeUxvY3NMaXN0IiwiY29udGV4dCIsInN0YXRlIiwicHJvdG9HZW5lcmF0b3IiLCJHZW5lcmF0b3IiLCJnZW5lcmF0b3IiLCJDb250ZXh0IiwiX2ludm9rZSIsIkdlblN0YXRlU3VzcGVuZGVkU3RhcnQiLCJtZXRob2QiLCJHZW5TdGF0ZUV4ZWN1dGluZyIsIkdlblN0YXRlQ29tcGxldGVkIiwiZG9uZVJlc3VsdCIsImRlbGVnYXRlIiwiZGVsZWdhdGVSZXN1bHQiLCJtYXliZUludm9rZURlbGVnYXRlIiwiQ29udGludWVTZW50aW5lbCIsInJlY29yZCIsInRyeUNhdGNoIiwidHlwZSIsInJlc3VsdE5hbWUiLCJuZXh0IiwibmV4dExvYyIsInNlbnQiLCJfc2VudCIsImRpc3BhdGNoRXhjZXB0aW9uIiwiYWJydXB0IiwiR2VuU3RhdGVTdXNwZW5kZWRZaWVsZCIsIkdlbmVyYXRvckZ1bmN0aW9uIiwiR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUiLCJJdGVyYXRvclByb3RvdHlwZSIsImdldFByb3RvIiwiTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUiLCJ2YWx1ZXMiLCJHcCIsImRlZmluZUl0ZXJhdG9yTWV0aG9kcyIsImZvckVhY2giLCJBc3luY0l0ZXJhdG9yIiwiUHJvbWlzZUltcGwiLCJwcmV2aW91c1Byb21pc2UiLCJjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZyIsImludm9rZSIsInJlc3VsdCIsIl9fYXdhaXQiLCJ1bndyYXBwZWQiLCJwdXNoVHJ5RW50cnkiLCJsb2NzIiwiZW50cnkiLCJ0cnlMb2MiLCJjYXRjaExvYyIsImZpbmFsbHlMb2MiLCJhZnRlckxvYyIsInRyeUVudHJpZXMiLCJwdXNoIiwicmVzZXRUcnlFbnRyeSIsImNvbXBsZXRpb24iLCJyZXNldCIsIml0ZXJhYmxlIiwiaXRlcmF0b3JNZXRob2QiLCJpc05hTiIsImRpc3BsYXlOYW1lIiwiaXNHZW5lcmF0b3JGdW5jdGlvbiIsImdlbkZ1biIsImN0b3IiLCJuYW1lIiwibWFyayIsImF3cmFwIiwiYXN5bmMiLCJpdGVyIiwia2V5cyIsIm9iamVjdCIsInJldmVyc2UiLCJwb3AiLCJza2lwVGVtcFJlc2V0IiwicHJldiIsImNoYXJBdCIsInNsaWNlIiwic3RvcCIsInJvb3RSZWNvcmQiLCJydmFsIiwiZXhjZXB0aW9uIiwiaGFuZGxlIiwibG9jIiwiY2F1Z2h0IiwiaGFzQ2F0Y2giLCJoYXNGaW5hbGx5IiwiZmluYWxseUVudHJ5IiwiY29tcGxldGUiLCJmaW5pc2giLCJjYXRjaCIsInRocm93biIsImRlbGVnYXRlWWllbGQiLCJyZWdlbmVyYXRvclJ1bnRpbWUiLCJhY2NpZGVudGFsU3RyaWN0TW9kZSIsImdsb2JhbFRoaXMiLCJGdW5jdGlvbiIsIkltZ0JCIiwiZGF0YSIsIl9jbGFzc0NhbGxDaGVjazIiLCJpZCIsInRpdGxlIiwidXJsIiwiX3V0aWxzIiwiQWJzdHJhY3RDb21wb25lbnQiLCJfZWxlbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJfZ2V0VGVtcGxhdGUiLCJJbWdJdGVtIiwiX3JlZiIsIl9yZWYkdXJsIiwiX3JlZiR0aXRsZSIsIl90aGlzIiwiX3N1cGVyIiwiX3VybCIsIl90aXRsZSIsImNvbmNhdCIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJJbWdMaXN0IiwiX2Fic3RyYWN0Q29tcG9uZW50IiwiX2VudW0iLCJJbWdVcGxvYWRlciIsIl9yZWYkb25JbWFnZVN1Ym1pdCIsIm9uSW1hZ2VTdWJtaXQiLCJfb25JbWFnZVN1Ym1pdCIsIl9pbnB1dE5hbWUiLCJnZXRFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsIl9pbnB1dEltZyIsImFkZEV2ZW50TGlzdGVuZXIiLCJldnQiLCJfb25Gb3JtQ2xpY2siLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJmb3JtIiwiY3VycmVudFRhcmdldCIsIm5vZGVOYW1lIiwiVGFnTmFtZSIsIkJVVFRPTiIsInJlcG9ydFZhbGlkaXR5IiwicHJldmVudERlZmF1bHQiLCJmb3JtRGF0YSIsIkZvcm1EYXRhIiwiTG9hZGVyIiwiX3BpbiIsIl9yZXEiLCJfZGVnIiwiX3Jlc2V0IiwiX3RoaXMyIiwic3R5bGUiLCJkaXNwbGF5Iiwic3RlcCIsInRyYW5zZm9ybSIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImNhbmNlbEFuaW1hdGlvbkZyYW1lIiwiaW1hZ2VzU3RvcmVDb25maWciLCJzdG9yYWdlIiwibG9jYWxTdG9yYWdlIiwiaW5pdGlhbERhdGEiLCJlbmRQb2ludCIsImFwaUtleSIsIl9pbWdVcGxvYWRlciIsIl9pbWdMaXN0IiwiX2ltZ0l0ZW0iLCJfbG9hZGVyIiwiR2FsbGVyeUNvbnRyb2xsZXIiLCJjb250YWluZXIiLCJfb25JbWFnZVN1Ym1pdDIiLCJfY29udGFpbmVyIiwiX2luaXQiLCJpbWFnZXMiLCJpbm5lckhUTUwiLCJpbWFnZSIsInJlbmRlciIsIlBvc2l0aW9uIiwiQkVGT1JFRU5EIiwidW5sb2NrIiwidW5CbG9jayIsInN0b3BBbmltYXRpb24iLCJibG9jayIsInN0YXJ0QW5pbWF0aW9uIiwiR0VUIiwiUE9TVCIsIkFGVEVSQkVHSU4iLCJJTlBVVCIsIkxBQkVMIiwiX2FwaSIsIl9pbWdCQlNlcnZlckNvbmZpZyIsIl9nYWxsZXJ5Q29udHJvbGxlciIsIl9pbWFnZXNTdG9yZUNvbmZpZyIsIl9hcnJTdG9yZSIsImltZ0JCQVBJIiwiaW1hZ2VzU3RvcmUiLCJfYXN5bmNUb0dlbmVyYXRvcjIiLCJfcmVnZW5lcmF0b3IiLCJfY2FsbGVlIiwiaW1nQmFzZTY0IiwidXBsb2FkZWREYXRhIiwiX2NvbnRleHQiLCJpbWFnZUZpbGUiLCJnZXQiLCJlbmNvZGVUb0Jhc2U2NCIsInNldCIsInJlcGxhY2UiLCJ1cGxvYWRJbWciLCJldmVyeSIsImdhbGxlcnlDb250cm9sbGVyIiwidXBkYXRlSW1hZ2VzIiwiYWxlcnQiLCJfeCIsImRvY3VtZW50IiwiX2ltZ0JiIiwiQXBpIiwiX2VuZFBvaW50IiwiX2FwaUtleSIsIl9sb2FkIiwiTWV0aG9kIiwidGltZW91dCIsImJvZHkiLCJ0b0pTT04iLCJqc29uRGF0YSIsInBhcnNlSW1nIiwiX3JlZjIiLCJfcmVmMiRtZXRob2QiLCJfcmVmMiRib2R5IiwiX3JlZjIkaGVhZGVycyIsImhlYWRlcnMiLCJIZWFkZXJzIiwiX3JlZjIkdGltZW91dCIsImZldGNoIiwicmVzcG9uc2UiLCJzdGF0dXMiLCJzdGF0dXNUZXh0IiwiQXJyU3RvcmUiLCJfc3RvcmFnZSIsIl9rZXkiLCJpc0luU3RvcmFnZSIsInNldEl0ZW0iLCJKU09OIiwic3RyaW5naWZ5IiwiX2RhdGEiLCJwYXJzZSIsImdldEl0ZW0iLCJtYXAiLCJhc3NpZ24iLCJfc2F2ZSIsImpzb24iLCJ0ZW1wbGF0ZSIsIm5ld0VsZW1lbnQiLCJmaXJzdENoaWxkIiwiZWxlbWVudCIsInBsYWNlIiwicHJlcGVuZCIsImFwcGVuZCIsImZpbGUiLCJyZWFkZXIiLCJGaWxlUmVhZGVyIiwicmVhZEFzRGF0YVVSTCIsIm9ubG9hZCIsIm9uZXJyb3IiXSwibWFwcGluZ3MiOiJDQUFBLFNBQUFBLEVBQUFDLEVBQUFDLEVBQUFDLEdBQUEsU0FBQUMsRUFBQUMsRUFBQUMsR0FBQSxJQUFBSixFQUFBRyxHQUFBLENBQUEsSUFBQUosRUFBQUksR0FBQSxDQUFBLElBQUFFLEVBQUEsbUJBQUFDLFNBQUFBLFFBQUEsSUFBQUYsR0FBQUMsRUFBQSxPQUFBQSxFQUFBRixHQUFBLEdBQUEsR0FBQUksRUFBQSxPQUFBQSxFQUFBSixHQUFBLEdBQUEsTUFBQUssRUFBQSxJQUFBQyxNQUFBLHVCQUFBTixFQUFBLE1B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QkFHcEMsV0FDRSxPQUFPN1IsS0FBS2tTLE1BQU1HLElBQUksU0FBQ3hRLEdBQUQsT0FBU2IsT0FBT3NSLE9BQU8sR0FBSXpRLE8sa0JBR25ELFNBQUtzSCxHQUNIbkosS0FBS2tTLE1BQU0zTCxLQUFLNEMsR0FDaEJuSixLQUFLdVMsVSxtQkFHUCxXQUNFdlMsS0FBSzRSLFNBQVNHLFFBQVEvUixLQUFLNlIsS0FBTUcsS0FBS0MsVUFBVWpTLEtBQUtrUyxZLGlTQzFCekQsSUFBQXpILEVBQUF0TSxFQUFBLGdCLFNBRXNCLFNBQUNxVCxHQUNyQixPQUFPQSxFQUFTZ0IsUSxnQkFHVyxTQUFDQyxHQUM1QixJQUFNQyxFQUFhdEMsU0FBU3pHLGNBQVQsT0FFbkIsT0FEQStJLEVBQVc3RSxVQUFZNEUsRUFDaEJDLEVBQVdDLFksU0FHRSxTQUFDbkYsRUFBV29GLEVBQVNDLEdBQ3pDLE9BQVFBLEdBQ04sS0FBS3BJLEVBQUF1RCxTQUFTUyxXQUNaakIsRUFBVXNGLFFBQVFGLEdBQ2xCLE1BQ0YsS0FBS25JLEVBQUF1RCxTQUFTQyxVQUNaVCxFQUFVdUYsT0FBT0gsSyxVQVFBLFNBQUNBLEdBQ2xCQSxHQUNGQSxFQUFRckgsMkJBSWtCLFNBQUN5SCxHQUM3QixPQUFPLElBQUluVCxRQUFRLFNBQUNWLEVBQVNDLEdBQzNCLElBQU02VCxFQUFTLElBQUlDLFdBQ25CRCxFQUFPRSxjQUFjSCxHQUNyQkMsRUFBT0csT0FBUyxXQUNkalUsRUFBUThULEVBQU9yTixTQUVqQnFOLEVBQU9JLFFBQVUsV0FDZmpVLEVBQU82VCxFQUFPdFQiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsImZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikge1xuICBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7XG4gICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO1xuICB9XG5cbiAgcmV0dXJuIHNlbGY7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX2Fzc2VydFRoaXNJbml0aWFsaXplZDtcbm1vZHVsZS5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IG1vZHVsZS5leHBvcnRzLCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsiLCJmdW5jdGlvbiBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csIGtleSwgYXJnKSB7XG4gIHRyeSB7XG4gICAgdmFyIGluZm8gPSBnZW5ba2V5XShhcmcpO1xuICAgIHZhciB2YWx1ZSA9IGluZm8udmFsdWU7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmVqZWN0KGVycm9yKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoaW5mby5kb25lKSB7XG4gICAgcmVzb2x2ZSh2YWx1ZSk7XG4gIH0gZWxzZSB7XG4gICAgUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS50aGVuKF9uZXh0LCBfdGhyb3cpO1xuICB9XG59XG5cbmZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzLFxuICAgICAgICBhcmdzID0gYXJndW1lbnRzO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICB2YXIgZ2VuID0gZm4uYXBwbHkoc2VsZiwgYXJncyk7XG5cbiAgICAgIGZ1bmN0aW9uIF9uZXh0KHZhbHVlKSB7XG4gICAgICAgIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgXCJuZXh0XCIsIHZhbHVlKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gX3Rocm93KGVycikge1xuICAgICAgICBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csIFwidGhyb3dcIiwgZXJyKTtcbiAgICAgIH1cblxuICAgICAgX25leHQodW5kZWZpbmVkKTtcbiAgICB9KTtcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfYXN5bmNUb0dlbmVyYXRvcjtcbm1vZHVsZS5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IG1vZHVsZS5leHBvcnRzLCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsiLCJmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7XG4gIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9jbGFzc0NhbGxDaGVjaztcbm1vZHVsZS5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IG1vZHVsZS5leHBvcnRzLCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsiLCJmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO1xuICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtcbiAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7XG4gICAgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7XG4gIH1cbn1cblxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuICBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTtcbiAgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO1xuICByZXR1cm4gQ29uc3RydWN0b3I7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX2NyZWF0ZUNsYXNzO1xubW9kdWxlLmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gbW9kdWxlLmV4cG9ydHMsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOyIsImZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7XG4gIG1vZHVsZS5leHBvcnRzID0gX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHtcbiAgICByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pO1xuICB9O1xuICBtb2R1bGUuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBtb2R1bGUuZXhwb3J0cywgbW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG4gIHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX2dldFByb3RvdHlwZU9mO1xubW9kdWxlLmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gbW9kdWxlLmV4cG9ydHMsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOyIsInZhciBzZXRQcm90b3R5cGVPZiA9IHJlcXVpcmUoXCIuL3NldFByb3RvdHlwZU9mLmpzXCIpO1xuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHtcbiAgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTtcbiAgfVxuXG4gIHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwge1xuICAgIGNvbnN0cnVjdG9yOiB7XG4gICAgICB2YWx1ZTogc3ViQ2xhc3MsXG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH1cbiAgfSk7XG4gIGlmIChzdXBlckNsYXNzKSBzZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX2luaGVyaXRzO1xubW9kdWxlLmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gbW9kdWxlLmV4cG9ydHMsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOyIsImZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XG4gIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7XG4gICAgXCJkZWZhdWx0XCI6IG9ialxuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQ7XG5tb2R1bGUuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBtb2R1bGUuZXhwb3J0cywgbW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7IiwidmFyIF90eXBlb2YgPSByZXF1aXJlKFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy90eXBlb2ZcIilbXCJkZWZhdWx0XCJdO1xuXG52YXIgYXNzZXJ0VGhpc0luaXRpYWxpemVkID0gcmVxdWlyZShcIi4vYXNzZXJ0VGhpc0luaXRpYWxpemVkLmpzXCIpO1xuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7XG4gIGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpKSB7XG4gICAgcmV0dXJuIGNhbGw7XG4gIH0gZWxzZSBpZiAoY2FsbCAhPT0gdm9pZCAwKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkRlcml2ZWQgY29uc3RydWN0b3JzIG1heSBvbmx5IHJldHVybiBvYmplY3Qgb3IgdW5kZWZpbmVkXCIpO1xuICB9XG5cbiAgcmV0dXJuIGFzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjtcbm1vZHVsZS5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IG1vZHVsZS5leHBvcnRzLCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsiLCJmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkge1xuICBtb2R1bGUuZXhwb3J0cyA9IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkge1xuICAgIG8uX19wcm90b19fID0gcDtcbiAgICByZXR1cm4gbztcbiAgfTtcblxuICBtb2R1bGUuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBtb2R1bGUuZXhwb3J0cywgbW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG4gIHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX3NldFByb3RvdHlwZU9mO1xubW9kdWxlLmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gbW9kdWxlLmV4cG9ydHMsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlOyIsImZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7XG4gIFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjtcblxuICBpZiAodHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikge1xuICAgICAgcmV0dXJuIHR5cGVvZiBvYmo7XG4gICAgfTtcblxuICAgIG1vZHVsZS5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IG1vZHVsZS5leHBvcnRzLCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbiAgfSBlbHNlIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikge1xuICAgICAgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7XG4gICAgfTtcblxuICAgIG1vZHVsZS5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IG1vZHVsZS5leHBvcnRzLCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiBfdHlwZW9mKG9iaik7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX3R5cGVvZjtcbm1vZHVsZS5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IG1vZHVsZS5leHBvcnRzLCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJyZWdlbmVyYXRvci1ydW50aW1lXCIpO1xuIiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTQtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqL1xuXG52YXIgcnVudGltZSA9IChmdW5jdGlvbiAoZXhwb3J0cykge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICB2YXIgT3AgPSBPYmplY3QucHJvdG90eXBlO1xuICB2YXIgaGFzT3duID0gT3AuaGFzT3duUHJvcGVydHk7XG4gIHZhciB1bmRlZmluZWQ7IC8vIE1vcmUgY29tcHJlc3NpYmxlIHRoYW4gdm9pZCAwLlxuICB2YXIgJFN5bWJvbCA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiA/IFN5bWJvbCA6IHt9O1xuICB2YXIgaXRlcmF0b3JTeW1ib2wgPSAkU3ltYm9sLml0ZXJhdG9yIHx8IFwiQEBpdGVyYXRvclwiO1xuICB2YXIgYXN5bmNJdGVyYXRvclN5bWJvbCA9ICRTeW1ib2wuYXN5bmNJdGVyYXRvciB8fCBcIkBAYXN5bmNJdGVyYXRvclwiO1xuICB2YXIgdG9TdHJpbmdUYWdTeW1ib2wgPSAkU3ltYm9sLnRvU3RyaW5nVGFnIHx8IFwiQEB0b1N0cmluZ1RhZ1wiO1xuXG4gIGZ1bmN0aW9uIGRlZmluZShvYmosIGtleSwgdmFsdWUpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcbiAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICB3cml0YWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiBvYmpba2V5XTtcbiAgfVxuICB0cnkge1xuICAgIC8vIElFIDggaGFzIGEgYnJva2VuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSB0aGF0IG9ubHkgd29ya3Mgb24gRE9NIG9iamVjdHMuXG4gICAgZGVmaW5lKHt9LCBcIlwiKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgZGVmaW5lID0gZnVuY3Rpb24ob2JqLCBrZXksIHZhbHVlKSB7XG4gICAgICByZXR1cm4gb2JqW2tleV0gPSB2YWx1ZTtcbiAgICB9O1xuICB9XG5cbiAgZnVuY3Rpb24gd3JhcChpbm5lckZuLCBvdXRlckZuLCBzZWxmLCB0cnlMb2NzTGlzdCkge1xuICAgIC8vIElmIG91dGVyRm4gcHJvdmlkZWQgYW5kIG91dGVyRm4ucHJvdG90eXBlIGlzIGEgR2VuZXJhdG9yLCB0aGVuIG91dGVyRm4ucHJvdG90eXBlIGluc3RhbmNlb2YgR2VuZXJhdG9yLlxuICAgIHZhciBwcm90b0dlbmVyYXRvciA9IG91dGVyRm4gJiYgb3V0ZXJGbi5wcm90b3R5cGUgaW5zdGFuY2VvZiBHZW5lcmF0b3IgPyBvdXRlckZuIDogR2VuZXJhdG9yO1xuICAgIHZhciBnZW5lcmF0b3IgPSBPYmplY3QuY3JlYXRlKHByb3RvR2VuZXJhdG9yLnByb3RvdHlwZSk7XG4gICAgdmFyIGNvbnRleHQgPSBuZXcgQ29udGV4dCh0cnlMb2NzTGlzdCB8fCBbXSk7XG5cbiAgICAvLyBUaGUgLl9pbnZva2UgbWV0aG9kIHVuaWZpZXMgdGhlIGltcGxlbWVudGF0aW9ucyBvZiB0aGUgLm5leHQsXG4gICAgLy8gLnRocm93LCBhbmQgLnJldHVybiBtZXRob2RzLlxuICAgIGdlbmVyYXRvci5faW52b2tlID0gbWFrZUludm9rZU1ldGhvZChpbm5lckZuLCBzZWxmLCBjb250ZXh0KTtcblxuICAgIHJldHVybiBnZW5lcmF0b3I7XG4gIH1cbiAgZXhwb3J0cy53cmFwID0gd3JhcDtcblxuICAvLyBUcnkvY2F0Y2ggaGVscGVyIHRvIG1pbmltaXplIGRlb3B0aW1pemF0aW9ucy4gUmV0dXJucyBhIGNvbXBsZXRpb25cbiAgLy8gcmVjb3JkIGxpa2UgY29udGV4dC50cnlFbnRyaWVzW2ldLmNvbXBsZXRpb24uIFRoaXMgaW50ZXJmYWNlIGNvdWxkXG4gIC8vIGhhdmUgYmVlbiAoYW5kIHdhcyBwcmV2aW91c2x5KSBkZXNpZ25lZCB0byB0YWtlIGEgY2xvc3VyZSB0byBiZVxuICAvLyBpbnZva2VkIHdpdGhvdXQgYXJndW1lbnRzLCBidXQgaW4gYWxsIHRoZSBjYXNlcyB3ZSBjYXJlIGFib3V0IHdlXG4gIC8vIGFscmVhZHkgaGF2ZSBhbiBleGlzdGluZyBtZXRob2Qgd2Ugd2FudCB0byBjYWxsLCBzbyB0aGVyZSdzIG5vIG5lZWRcbiAgLy8gdG8gY3JlYXRlIGEgbmV3IGZ1bmN0aW9uIG9iamVjdC4gV2UgY2FuIGV2ZW4gZ2V0IGF3YXkgd2l0aCBhc3N1bWluZ1xuICAvLyB0aGUgbWV0aG9kIHRha2VzIGV4YWN0bHkgb25lIGFyZ3VtZW50LCBzaW5jZSB0aGF0IGhhcHBlbnMgdG8gYmUgdHJ1ZVxuICAvLyBpbiBldmVyeSBjYXNlLCBzbyB3ZSBkb24ndCBoYXZlIHRvIHRvdWNoIHRoZSBhcmd1bWVudHMgb2JqZWN0LiBUaGVcbiAgLy8gb25seSBhZGRpdGlvbmFsIGFsbG9jYXRpb24gcmVxdWlyZWQgaXMgdGhlIGNvbXBsZXRpb24gcmVjb3JkLCB3aGljaFxuICAvLyBoYXMgYSBzdGFibGUgc2hhcGUgYW5kIHNvIGhvcGVmdWxseSBzaG91bGQgYmUgY2hlYXAgdG8gYWxsb2NhdGUuXG4gIGZ1bmN0aW9uIHRyeUNhdGNoKGZuLCBvYmosIGFyZykge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4geyB0eXBlOiBcIm5vcm1hbFwiLCBhcmc6IGZuLmNhbGwob2JqLCBhcmcpIH07XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICByZXR1cm4geyB0eXBlOiBcInRocm93XCIsIGFyZzogZXJyIH07XG4gICAgfVxuICB9XG5cbiAgdmFyIEdlblN0YXRlU3VzcGVuZGVkU3RhcnQgPSBcInN1c3BlbmRlZFN0YXJ0XCI7XG4gIHZhciBHZW5TdGF0ZVN1c3BlbmRlZFlpZWxkID0gXCJzdXNwZW5kZWRZaWVsZFwiO1xuICB2YXIgR2VuU3RhdGVFeGVjdXRpbmcgPSBcImV4ZWN1dGluZ1wiO1xuICB2YXIgR2VuU3RhdGVDb21wbGV0ZWQgPSBcImNvbXBsZXRlZFwiO1xuXG4gIC8vIFJldHVybmluZyB0aGlzIG9iamVjdCBmcm9tIHRoZSBpbm5lckZuIGhhcyB0aGUgc2FtZSBlZmZlY3QgYXNcbiAgLy8gYnJlYWtpbmcgb3V0IG9mIHRoZSBkaXNwYXRjaCBzd2l0Y2ggc3RhdGVtZW50LlxuICB2YXIgQ29udGludWVTZW50aW5lbCA9IHt9O1xuXG4gIC8vIER1bW15IGNvbnN0cnVjdG9yIGZ1bmN0aW9ucyB0aGF0IHdlIHVzZSBhcyB0aGUgLmNvbnN0cnVjdG9yIGFuZFxuICAvLyAuY29uc3RydWN0b3IucHJvdG90eXBlIHByb3BlcnRpZXMgZm9yIGZ1bmN0aW9ucyB0aGF0IHJldHVybiBHZW5lcmF0b3JcbiAgLy8gb2JqZWN0cy4gRm9yIGZ1bGwgc3BlYyBjb21wbGlhbmNlLCB5b3UgbWF5IHdpc2ggdG8gY29uZmlndXJlIHlvdXJcbiAgLy8gbWluaWZpZXIgbm90IHRvIG1hbmdsZSB0aGUgbmFtZXMgb2YgdGhlc2UgdHdvIGZ1bmN0aW9ucy5cbiAgZnVuY3Rpb24gR2VuZXJhdG9yKCkge31cbiAgZnVuY3Rpb24gR2VuZXJhdG9yRnVuY3Rpb24oKSB7fVxuICBmdW5jdGlvbiBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSgpIHt9XG5cbiAgLy8gVGhpcyBpcyBhIHBvbHlmaWxsIGZvciAlSXRlcmF0b3JQcm90b3R5cGUlIGZvciBlbnZpcm9ubWVudHMgdGhhdFxuICAvLyBkb24ndCBuYXRpdmVseSBzdXBwb3J0IGl0LlxuICB2YXIgSXRlcmF0b3JQcm90b3R5cGUgPSB7fTtcbiAgZGVmaW5lKEl0ZXJhdG9yUHJvdG90eXBlLCBpdGVyYXRvclN5bWJvbCwgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzO1xuICB9KTtcblxuICB2YXIgZ2V0UHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Y7XG4gIHZhciBOYXRpdmVJdGVyYXRvclByb3RvdHlwZSA9IGdldFByb3RvICYmIGdldFByb3RvKGdldFByb3RvKHZhbHVlcyhbXSkpKTtcbiAgaWYgKE5hdGl2ZUl0ZXJhdG9yUHJvdG90eXBlICYmXG4gICAgICBOYXRpdmVJdGVyYXRvclByb3RvdHlwZSAhPT0gT3AgJiZcbiAgICAgIGhhc093bi5jYWxsKE5hdGl2ZUl0ZXJhdG9yUHJvdG90eXBlLCBpdGVyYXRvclN5bWJvbCkpIHtcbiAgICAvLyBUaGlzIGVudmlyb25tZW50IGhhcyBhIG5hdGl2ZSAlSXRlcmF0b3JQcm90b3R5cGUlOyB1c2UgaXQgaW5zdGVhZFxuICAgIC8vIG9mIHRoZSBwb2x5ZmlsbC5cbiAgICBJdGVyYXRvclByb3RvdHlwZSA9IE5hdGl2ZUl0ZXJhdG9yUHJvdG90eXBlO1xuICB9XG5cbiAgdmFyIEdwID0gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUucHJvdG90eXBlID1cbiAgICBHZW5lcmF0b3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShJdGVyYXRvclByb3RvdHlwZSk7XG4gIEdlbmVyYXRvckZ1bmN0aW9uLnByb3RvdHlwZSA9IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlO1xuICBkZWZpbmUoR3AsIFwiY29uc3RydWN0b3JcIiwgR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUpO1xuICBkZWZpbmUoR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUsIFwiY29uc3RydWN0b3JcIiwgR2VuZXJhdG9yRnVuY3Rpb24pO1xuICBHZW5lcmF0b3JGdW5jdGlvbi5kaXNwbGF5TmFtZSA9IGRlZmluZShcbiAgICBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSxcbiAgICB0b1N0cmluZ1RhZ1N5bWJvbCxcbiAgICBcIkdlbmVyYXRvckZ1bmN0aW9uXCJcbiAgKTtcblxuICAvLyBIZWxwZXIgZm9yIGRlZmluaW5nIHRoZSAubmV4dCwgLnRocm93LCBhbmQgLnJldHVybiBtZXRob2RzIG9mIHRoZVxuICAvLyBJdGVyYXRvciBpbnRlcmZhY2UgaW4gdGVybXMgb2YgYSBzaW5nbGUgLl9pbnZva2UgbWV0aG9kLlxuICBmdW5jdGlvbiBkZWZpbmVJdGVyYXRvck1ldGhvZHMocHJvdG90eXBlKSB7XG4gICAgW1wibmV4dFwiLCBcInRocm93XCIsIFwicmV0dXJuXCJdLmZvckVhY2goZnVuY3Rpb24obWV0aG9kKSB7XG4gICAgICBkZWZpbmUocHJvdG90eXBlLCBtZXRob2QsIGZ1bmN0aW9uKGFyZykge1xuICAgICAgICByZXR1cm4gdGhpcy5faW52b2tlKG1ldGhvZCwgYXJnKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZXhwb3J0cy5pc0dlbmVyYXRvckZ1bmN0aW9uID0gZnVuY3Rpb24oZ2VuRnVuKSB7XG4gICAgdmFyIGN0b3IgPSB0eXBlb2YgZ2VuRnVuID09PSBcImZ1bmN0aW9uXCIgJiYgZ2VuRnVuLmNvbnN0cnVjdG9yO1xuICAgIHJldHVybiBjdG9yXG4gICAgICA/IGN0b3IgPT09IEdlbmVyYXRvckZ1bmN0aW9uIHx8XG4gICAgICAgIC8vIEZvciB0aGUgbmF0aXZlIEdlbmVyYXRvckZ1bmN0aW9uIGNvbnN0cnVjdG9yLCB0aGUgYmVzdCB3ZSBjYW5cbiAgICAgICAgLy8gZG8gaXMgdG8gY2hlY2sgaXRzIC5uYW1lIHByb3BlcnR5LlxuICAgICAgICAoY3Rvci5kaXNwbGF5TmFtZSB8fCBjdG9yLm5hbWUpID09PSBcIkdlbmVyYXRvckZ1bmN0aW9uXCJcbiAgICAgIDogZmFsc2U7XG4gIH07XG5cbiAgZXhwb3J0cy5tYXJrID0gZnVuY3Rpb24oZ2VuRnVuKSB7XG4gICAgaWYgKE9iamVjdC5zZXRQcm90b3R5cGVPZikge1xuICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKGdlbkZ1biwgR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBnZW5GdW4uX19wcm90b19fID0gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGU7XG4gICAgICBkZWZpbmUoZ2VuRnVuLCB0b1N0cmluZ1RhZ1N5bWJvbCwgXCJHZW5lcmF0b3JGdW5jdGlvblwiKTtcbiAgICB9XG4gICAgZ2VuRnVuLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoR3ApO1xuICAgIHJldHVybiBnZW5GdW47XG4gIH07XG5cbiAgLy8gV2l0aGluIHRoZSBib2R5IG9mIGFueSBhc3luYyBmdW5jdGlvbiwgYGF3YWl0IHhgIGlzIHRyYW5zZm9ybWVkIHRvXG4gIC8vIGB5aWVsZCByZWdlbmVyYXRvclJ1bnRpbWUuYXdyYXAoeClgLCBzbyB0aGF0IHRoZSBydW50aW1lIGNhbiB0ZXN0XG4gIC8vIGBoYXNPd24uY2FsbCh2YWx1ZSwgXCJfX2F3YWl0XCIpYCB0byBkZXRlcm1pbmUgaWYgdGhlIHlpZWxkZWQgdmFsdWUgaXNcbiAgLy8gbWVhbnQgdG8gYmUgYXdhaXRlZC5cbiAgZXhwb3J0cy5hd3JhcCA9IGZ1bmN0aW9uKGFyZykge1xuICAgIHJldHVybiB7IF9fYXdhaXQ6IGFyZyB9O1xuICB9O1xuXG4gIGZ1bmN0aW9uIEFzeW5jSXRlcmF0b3IoZ2VuZXJhdG9yLCBQcm9taXNlSW1wbCkge1xuICAgIGZ1bmN0aW9uIGludm9rZShtZXRob2QsIGFyZywgcmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICB2YXIgcmVjb3JkID0gdHJ5Q2F0Y2goZ2VuZXJhdG9yW21ldGhvZF0sIGdlbmVyYXRvciwgYXJnKTtcbiAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgIHJlamVjdChyZWNvcmQuYXJnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciByZXN1bHQgPSByZWNvcmQuYXJnO1xuICAgICAgICB2YXIgdmFsdWUgPSByZXN1bHQudmFsdWU7XG4gICAgICAgIGlmICh2YWx1ZSAmJlxuICAgICAgICAgICAgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgICAgICBoYXNPd24uY2FsbCh2YWx1ZSwgXCJfX2F3YWl0XCIpKSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2VJbXBsLnJlc29sdmUodmFsdWUuX19hd2FpdCkudGhlbihmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgaW52b2tlKFwibmV4dFwiLCB2YWx1ZSwgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICB9LCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgIGludm9rZShcInRocm93XCIsIGVyciwgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBQcm9taXNlSW1wbC5yZXNvbHZlKHZhbHVlKS50aGVuKGZ1bmN0aW9uKHVud3JhcHBlZCkge1xuICAgICAgICAgIC8vIFdoZW4gYSB5aWVsZGVkIFByb21pc2UgaXMgcmVzb2x2ZWQsIGl0cyBmaW5hbCB2YWx1ZSBiZWNvbWVzXG4gICAgICAgICAgLy8gdGhlIC52YWx1ZSBvZiB0aGUgUHJvbWlzZTx7dmFsdWUsZG9uZX0+IHJlc3VsdCBmb3IgdGhlXG4gICAgICAgICAgLy8gY3VycmVudCBpdGVyYXRpb24uXG4gICAgICAgICAgcmVzdWx0LnZhbHVlID0gdW53cmFwcGVkO1xuICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgfSwgZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgICAvLyBJZiBhIHJlamVjdGVkIFByb21pc2Ugd2FzIHlpZWxkZWQsIHRocm93IHRoZSByZWplY3Rpb24gYmFja1xuICAgICAgICAgIC8vIGludG8gdGhlIGFzeW5jIGdlbmVyYXRvciBmdW5jdGlvbiBzbyBpdCBjYW4gYmUgaGFuZGxlZCB0aGVyZS5cbiAgICAgICAgICByZXR1cm4gaW52b2tlKFwidGhyb3dcIiwgZXJyb3IsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBwcmV2aW91c1Byb21pc2U7XG5cbiAgICBmdW5jdGlvbiBlbnF1ZXVlKG1ldGhvZCwgYXJnKSB7XG4gICAgICBmdW5jdGlvbiBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZygpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlSW1wbChmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICBpbnZva2UobWV0aG9kLCBhcmcsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcHJldmlvdXNQcm9taXNlID1cbiAgICAgICAgLy8gSWYgZW5xdWV1ZSBoYXMgYmVlbiBjYWxsZWQgYmVmb3JlLCB0aGVuIHdlIHdhbnQgdG8gd2FpdCB1bnRpbFxuICAgICAgICAvLyBhbGwgcHJldmlvdXMgUHJvbWlzZXMgaGF2ZSBiZWVuIHJlc29sdmVkIGJlZm9yZSBjYWxsaW5nIGludm9rZSxcbiAgICAgICAgLy8gc28gdGhhdCByZXN1bHRzIGFyZSBhbHdheXMgZGVsaXZlcmVkIGluIHRoZSBjb3JyZWN0IG9yZGVyLiBJZlxuICAgICAgICAvLyBlbnF1ZXVlIGhhcyBub3QgYmVlbiBjYWxsZWQgYmVmb3JlLCB0aGVuIGl0IGlzIGltcG9ydGFudCB0b1xuICAgICAgICAvLyBjYWxsIGludm9rZSBpbW1lZGlhdGVseSwgd2l0aG91dCB3YWl0aW5nIG9uIGEgY2FsbGJhY2sgdG8gZmlyZSxcbiAgICAgICAgLy8gc28gdGhhdCB0aGUgYXN5bmMgZ2VuZXJhdG9yIGZ1bmN0aW9uIGhhcyB0aGUgb3Bwb3J0dW5pdHkgdG8gZG9cbiAgICAgICAgLy8gYW55IG5lY2Vzc2FyeSBzZXR1cCBpbiBhIHByZWRpY3RhYmxlIHdheS4gVGhpcyBwcmVkaWN0YWJpbGl0eVxuICAgICAgICAvLyBpcyB3aHkgdGhlIFByb21pc2UgY29uc3RydWN0b3Igc3luY2hyb25vdXNseSBpbnZva2VzIGl0c1xuICAgICAgICAvLyBleGVjdXRvciBjYWxsYmFjaywgYW5kIHdoeSBhc3luYyBmdW5jdGlvbnMgc3luY2hyb25vdXNseVxuICAgICAgICAvLyBleGVjdXRlIGNvZGUgYmVmb3JlIHRoZSBmaXJzdCBhd2FpdC4gU2luY2Ugd2UgaW1wbGVtZW50IHNpbXBsZVxuICAgICAgICAvLyBhc3luYyBmdW5jdGlvbnMgaW4gdGVybXMgb2YgYXN5bmMgZ2VuZXJhdG9ycywgaXQgaXMgZXNwZWNpYWxseVxuICAgICAgICAvLyBpbXBvcnRhbnQgdG8gZ2V0IHRoaXMgcmlnaHQsIGV2ZW4gdGhvdWdoIGl0IHJlcXVpcmVzIGNhcmUuXG4gICAgICAgIHByZXZpb3VzUHJvbWlzZSA/IHByZXZpb3VzUHJvbWlzZS50aGVuKFxuICAgICAgICAgIGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnLFxuICAgICAgICAgIC8vIEF2b2lkIHByb3BhZ2F0aW5nIGZhaWx1cmVzIHRvIFByb21pc2VzIHJldHVybmVkIGJ5IGxhdGVyXG4gICAgICAgICAgLy8gaW52b2NhdGlvbnMgb2YgdGhlIGl0ZXJhdG9yLlxuICAgICAgICAgIGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnXG4gICAgICAgICkgOiBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZygpO1xuICAgIH1cblxuICAgIC8vIERlZmluZSB0aGUgdW5pZmllZCBoZWxwZXIgbWV0aG9kIHRoYXQgaXMgdXNlZCB0byBpbXBsZW1lbnQgLm5leHQsXG4gICAgLy8gLnRocm93LCBhbmQgLnJldHVybiAoc2VlIGRlZmluZUl0ZXJhdG9yTWV0aG9kcykuXG4gICAgdGhpcy5faW52b2tlID0gZW5xdWV1ZTtcbiAgfVxuXG4gIGRlZmluZUl0ZXJhdG9yTWV0aG9kcyhBc3luY0l0ZXJhdG9yLnByb3RvdHlwZSk7XG4gIGRlZmluZShBc3luY0l0ZXJhdG9yLnByb3RvdHlwZSwgYXN5bmNJdGVyYXRvclN5bWJvbCwgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzO1xuICB9KTtcbiAgZXhwb3J0cy5Bc3luY0l0ZXJhdG9yID0gQXN5bmNJdGVyYXRvcjtcblxuICAvLyBOb3RlIHRoYXQgc2ltcGxlIGFzeW5jIGZ1bmN0aW9ucyBhcmUgaW1wbGVtZW50ZWQgb24gdG9wIG9mXG4gIC8vIEFzeW5jSXRlcmF0b3Igb2JqZWN0czsgdGhleSBqdXN0IHJldHVybiBhIFByb21pc2UgZm9yIHRoZSB2YWx1ZSBvZlxuICAvLyB0aGUgZmluYWwgcmVzdWx0IHByb2R1Y2VkIGJ5IHRoZSBpdGVyYXRvci5cbiAgZXhwb3J0cy5hc3luYyA9IGZ1bmN0aW9uKGlubmVyRm4sIG91dGVyRm4sIHNlbGYsIHRyeUxvY3NMaXN0LCBQcm9taXNlSW1wbCkge1xuICAgIGlmIChQcm9taXNlSW1wbCA9PT0gdm9pZCAwKSBQcm9taXNlSW1wbCA9IFByb21pc2U7XG5cbiAgICB2YXIgaXRlciA9IG5ldyBBc3luY0l0ZXJhdG9yKFxuICAgICAgd3JhcChpbm5lckZuLCBvdXRlckZuLCBzZWxmLCB0cnlMb2NzTGlzdCksXG4gICAgICBQcm9taXNlSW1wbFxuICAgICk7XG5cbiAgICByZXR1cm4gZXhwb3J0cy5pc0dlbmVyYXRvckZ1bmN0aW9uKG91dGVyRm4pXG4gICAgICA/IGl0ZXIgLy8gSWYgb3V0ZXJGbiBpcyBhIGdlbmVyYXRvciwgcmV0dXJuIHRoZSBmdWxsIGl0ZXJhdG9yLlxuICAgICAgOiBpdGVyLm5leHQoKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgICAgIHJldHVybiByZXN1bHQuZG9uZSA/IHJlc3VsdC52YWx1ZSA6IGl0ZXIubmV4dCgpO1xuICAgICAgICB9KTtcbiAgfTtcblxuICBmdW5jdGlvbiBtYWtlSW52b2tlTWV0aG9kKGlubmVyRm4sIHNlbGYsIGNvbnRleHQpIHtcbiAgICB2YXIgc3RhdGUgPSBHZW5TdGF0ZVN1c3BlbmRlZFN0YXJ0O1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIGludm9rZShtZXRob2QsIGFyZykge1xuICAgICAgaWYgKHN0YXRlID09PSBHZW5TdGF0ZUV4ZWN1dGluZykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBydW5uaW5nXCIpO1xuICAgICAgfVxuXG4gICAgICBpZiAoc3RhdGUgPT09IEdlblN0YXRlQ29tcGxldGVkKSB7XG4gICAgICAgIGlmIChtZXRob2QgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgIHRocm93IGFyZztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEJlIGZvcmdpdmluZywgcGVyIDI1LjMuMy4zLjMgb2YgdGhlIHNwZWM6XG4gICAgICAgIC8vIGh0dHBzOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy1nZW5lcmF0b3JyZXN1bWVcbiAgICAgICAgcmV0dXJuIGRvbmVSZXN1bHQoKTtcbiAgICAgIH1cblxuICAgICAgY29udGV4dC5tZXRob2QgPSBtZXRob2Q7XG4gICAgICBjb250ZXh0LmFyZyA9IGFyZztcblxuICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgdmFyIGRlbGVnYXRlID0gY29udGV4dC5kZWxlZ2F0ZTtcbiAgICAgICAgaWYgKGRlbGVnYXRlKSB7XG4gICAgICAgICAgdmFyIGRlbGVnYXRlUmVzdWx0ID0gbWF5YmVJbnZva2VEZWxlZ2F0ZShkZWxlZ2F0ZSwgY29udGV4dCk7XG4gICAgICAgICAgaWYgKGRlbGVnYXRlUmVzdWx0KSB7XG4gICAgICAgICAgICBpZiAoZGVsZWdhdGVSZXN1bHQgPT09IENvbnRpbnVlU2VudGluZWwpIGNvbnRpbnVlO1xuICAgICAgICAgICAgcmV0dXJuIGRlbGVnYXRlUmVzdWx0O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gXCJuZXh0XCIpIHtcbiAgICAgICAgICAvLyBTZXR0aW5nIGNvbnRleHQuX3NlbnQgZm9yIGxlZ2FjeSBzdXBwb3J0IG9mIEJhYmVsJ3NcbiAgICAgICAgICAvLyBmdW5jdGlvbi5zZW50IGltcGxlbWVudGF0aW9uLlxuICAgICAgICAgIGNvbnRleHQuc2VudCA9IGNvbnRleHQuX3NlbnQgPSBjb250ZXh0LmFyZztcblxuICAgICAgICB9IGVsc2UgaWYgKGNvbnRleHQubWV0aG9kID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICBpZiAoc3RhdGUgPT09IEdlblN0YXRlU3VzcGVuZGVkU3RhcnQpIHtcbiAgICAgICAgICAgIHN0YXRlID0gR2VuU3RhdGVDb21wbGV0ZWQ7XG4gICAgICAgICAgICB0aHJvdyBjb250ZXh0LmFyZztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb250ZXh0LmRpc3BhdGNoRXhjZXB0aW9uKGNvbnRleHQuYXJnKTtcblxuICAgICAgICB9IGVsc2UgaWYgKGNvbnRleHQubWV0aG9kID09PSBcInJldHVyblwiKSB7XG4gICAgICAgICAgY29udGV4dC5hYnJ1cHQoXCJyZXR1cm5cIiwgY29udGV4dC5hcmcpO1xuICAgICAgICB9XG5cbiAgICAgICAgc3RhdGUgPSBHZW5TdGF0ZUV4ZWN1dGluZztcblxuICAgICAgICB2YXIgcmVjb3JkID0gdHJ5Q2F0Y2goaW5uZXJGbiwgc2VsZiwgY29udGV4dCk7XG4gICAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJub3JtYWxcIikge1xuICAgICAgICAgIC8vIElmIGFuIGV4Y2VwdGlvbiBpcyB0aHJvd24gZnJvbSBpbm5lckZuLCB3ZSBsZWF2ZSBzdGF0ZSA9PT1cbiAgICAgICAgICAvLyBHZW5TdGF0ZUV4ZWN1dGluZyBhbmQgbG9vcCBiYWNrIGZvciBhbm90aGVyIGludm9jYXRpb24uXG4gICAgICAgICAgc3RhdGUgPSBjb250ZXh0LmRvbmVcbiAgICAgICAgICAgID8gR2VuU3RhdGVDb21wbGV0ZWRcbiAgICAgICAgICAgIDogR2VuU3RhdGVTdXNwZW5kZWRZaWVsZDtcblxuICAgICAgICAgIGlmIChyZWNvcmQuYXJnID09PSBDb250aW51ZVNlbnRpbmVsKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdmFsdWU6IHJlY29yZC5hcmcsXG4gICAgICAgICAgICBkb25lOiBjb250ZXh0LmRvbmVcbiAgICAgICAgICB9O1xuXG4gICAgICAgIH0gZWxzZSBpZiAocmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgIHN0YXRlID0gR2VuU3RhdGVDb21wbGV0ZWQ7XG4gICAgICAgICAgLy8gRGlzcGF0Y2ggdGhlIGV4Y2VwdGlvbiBieSBsb29waW5nIGJhY2sgYXJvdW5kIHRvIHRoZVxuICAgICAgICAgIC8vIGNvbnRleHQuZGlzcGF0Y2hFeGNlcHRpb24oY29udGV4dC5hcmcpIGNhbGwgYWJvdmUuXG4gICAgICAgICAgY29udGV4dC5tZXRob2QgPSBcInRocm93XCI7XG4gICAgICAgICAgY29udGV4dC5hcmcgPSByZWNvcmQuYXJnO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIC8vIENhbGwgZGVsZWdhdGUuaXRlcmF0b3JbY29udGV4dC5tZXRob2RdKGNvbnRleHQuYXJnKSBhbmQgaGFuZGxlIHRoZVxuICAvLyByZXN1bHQsIGVpdGhlciBieSByZXR1cm5pbmcgYSB7IHZhbHVlLCBkb25lIH0gcmVzdWx0IGZyb20gdGhlXG4gIC8vIGRlbGVnYXRlIGl0ZXJhdG9yLCBvciBieSBtb2RpZnlpbmcgY29udGV4dC5tZXRob2QgYW5kIGNvbnRleHQuYXJnLFxuICAvLyBzZXR0aW5nIGNvbnRleHQuZGVsZWdhdGUgdG8gbnVsbCwgYW5kIHJldHVybmluZyB0aGUgQ29udGludWVTZW50aW5lbC5cbiAgZnVuY3Rpb24gbWF5YmVJbnZva2VEZWxlZ2F0ZShkZWxlZ2F0ZSwgY29udGV4dCkge1xuICAgIHZhciBtZXRob2QgPSBkZWxlZ2F0ZS5pdGVyYXRvcltjb250ZXh0Lm1ldGhvZF07XG4gICAgaWYgKG1ldGhvZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAvLyBBIC50aHJvdyBvciAucmV0dXJuIHdoZW4gdGhlIGRlbGVnYXRlIGl0ZXJhdG9yIGhhcyBubyAudGhyb3dcbiAgICAgIC8vIG1ldGhvZCBhbHdheXMgdGVybWluYXRlcyB0aGUgeWllbGQqIGxvb3AuXG4gICAgICBjb250ZXh0LmRlbGVnYXRlID0gbnVsbDtcblxuICAgICAgaWYgKGNvbnRleHQubWV0aG9kID09PSBcInRocm93XCIpIHtcbiAgICAgICAgLy8gTm90ZTogW1wicmV0dXJuXCJdIG11c3QgYmUgdXNlZCBmb3IgRVMzIHBhcnNpbmcgY29tcGF0aWJpbGl0eS5cbiAgICAgICAgaWYgKGRlbGVnYXRlLml0ZXJhdG9yW1wicmV0dXJuXCJdKSB7XG4gICAgICAgICAgLy8gSWYgdGhlIGRlbGVnYXRlIGl0ZXJhdG9yIGhhcyBhIHJldHVybiBtZXRob2QsIGdpdmUgaXQgYVxuICAgICAgICAgIC8vIGNoYW5jZSB0byBjbGVhbiB1cC5cbiAgICAgICAgICBjb250ZXh0Lm1ldGhvZCA9IFwicmV0dXJuXCI7XG4gICAgICAgICAgY29udGV4dC5hcmcgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgbWF5YmVJbnZva2VEZWxlZ2F0ZShkZWxlZ2F0ZSwgY29udGV4dCk7XG5cbiAgICAgICAgICBpZiAoY29udGV4dC5tZXRob2QgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgICAgLy8gSWYgbWF5YmVJbnZva2VEZWxlZ2F0ZShjb250ZXh0KSBjaGFuZ2VkIGNvbnRleHQubWV0aG9kIGZyb21cbiAgICAgICAgICAgIC8vIFwicmV0dXJuXCIgdG8gXCJ0aHJvd1wiLCBsZXQgdGhhdCBvdmVycmlkZSB0aGUgVHlwZUVycm9yIGJlbG93LlxuICAgICAgICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29udGV4dC5tZXRob2QgPSBcInRocm93XCI7XG4gICAgICAgIGNvbnRleHQuYXJnID0gbmV3IFR5cGVFcnJvcihcbiAgICAgICAgICBcIlRoZSBpdGVyYXRvciBkb2VzIG5vdCBwcm92aWRlIGEgJ3Rocm93JyBtZXRob2RcIik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgIH1cblxuICAgIHZhciByZWNvcmQgPSB0cnlDYXRjaChtZXRob2QsIGRlbGVnYXRlLml0ZXJhdG9yLCBjb250ZXh0LmFyZyk7XG5cbiAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgY29udGV4dC5tZXRob2QgPSBcInRocm93XCI7XG4gICAgICBjb250ZXh0LmFyZyA9IHJlY29yZC5hcmc7XG4gICAgICBjb250ZXh0LmRlbGVnYXRlID0gbnVsbDtcbiAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgIH1cblxuICAgIHZhciBpbmZvID0gcmVjb3JkLmFyZztcblxuICAgIGlmICghIGluZm8pIHtcbiAgICAgIGNvbnRleHQubWV0aG9kID0gXCJ0aHJvd1wiO1xuICAgICAgY29udGV4dC5hcmcgPSBuZXcgVHlwZUVycm9yKFwiaXRlcmF0b3IgcmVzdWx0IGlzIG5vdCBhbiBvYmplY3RcIik7XG4gICAgICBjb250ZXh0LmRlbGVnYXRlID0gbnVsbDtcbiAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgIH1cblxuICAgIGlmIChpbmZvLmRvbmUpIHtcbiAgICAgIC8vIEFzc2lnbiB0aGUgcmVzdWx0IG9mIHRoZSBmaW5pc2hlZCBkZWxlZ2F0ZSB0byB0aGUgdGVtcG9yYXJ5XG4gICAgICAvLyB2YXJpYWJsZSBzcGVjaWZpZWQgYnkgZGVsZWdhdGUucmVzdWx0TmFtZSAoc2VlIGRlbGVnYXRlWWllbGQpLlxuICAgICAgY29udGV4dFtkZWxlZ2F0ZS5yZXN1bHROYW1lXSA9IGluZm8udmFsdWU7XG5cbiAgICAgIC8vIFJlc3VtZSBleGVjdXRpb24gYXQgdGhlIGRlc2lyZWQgbG9jYXRpb24gKHNlZSBkZWxlZ2F0ZVlpZWxkKS5cbiAgICAgIGNvbnRleHQubmV4dCA9IGRlbGVnYXRlLm5leHRMb2M7XG5cbiAgICAgIC8vIElmIGNvbnRleHQubWV0aG9kIHdhcyBcInRocm93XCIgYnV0IHRoZSBkZWxlZ2F0ZSBoYW5kbGVkIHRoZVxuICAgICAgLy8gZXhjZXB0aW9uLCBsZXQgdGhlIG91dGVyIGdlbmVyYXRvciBwcm9jZWVkIG5vcm1hbGx5LiBJZlxuICAgICAgLy8gY29udGV4dC5tZXRob2Qgd2FzIFwibmV4dFwiLCBmb3JnZXQgY29udGV4dC5hcmcgc2luY2UgaXQgaGFzIGJlZW5cbiAgICAgIC8vIFwiY29uc3VtZWRcIiBieSB0aGUgZGVsZWdhdGUgaXRlcmF0b3IuIElmIGNvbnRleHQubWV0aG9kIHdhc1xuICAgICAgLy8gXCJyZXR1cm5cIiwgYWxsb3cgdGhlIG9yaWdpbmFsIC5yZXR1cm4gY2FsbCB0byBjb250aW51ZSBpbiB0aGVcbiAgICAgIC8vIG91dGVyIGdlbmVyYXRvci5cbiAgICAgIGlmIChjb250ZXh0Lm1ldGhvZCAhPT0gXCJyZXR1cm5cIikge1xuICAgICAgICBjb250ZXh0Lm1ldGhvZCA9IFwibmV4dFwiO1xuICAgICAgICBjb250ZXh0LmFyZyA9IHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBSZS15aWVsZCB0aGUgcmVzdWx0IHJldHVybmVkIGJ5IHRoZSBkZWxlZ2F0ZSBtZXRob2QuXG4gICAgICByZXR1cm4gaW5mbztcbiAgICB9XG5cbiAgICAvLyBUaGUgZGVsZWdhdGUgaXRlcmF0b3IgaXMgZmluaXNoZWQsIHNvIGZvcmdldCBpdCBhbmQgY29udGludWUgd2l0aFxuICAgIC8vIHRoZSBvdXRlciBnZW5lcmF0b3IuXG4gICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7XG4gICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gIH1cblxuICAvLyBEZWZpbmUgR2VuZXJhdG9yLnByb3RvdHlwZS57bmV4dCx0aHJvdyxyZXR1cm59IGluIHRlcm1zIG9mIHRoZVxuICAvLyB1bmlmaWVkIC5faW52b2tlIGhlbHBlciBtZXRob2QuXG4gIGRlZmluZUl0ZXJhdG9yTWV0aG9kcyhHcCk7XG5cbiAgZGVmaW5lKEdwLCB0b1N0cmluZ1RhZ1N5bWJvbCwgXCJHZW5lcmF0b3JcIik7XG5cbiAgLy8gQSBHZW5lcmF0b3Igc2hvdWxkIGFsd2F5cyByZXR1cm4gaXRzZWxmIGFzIHRoZSBpdGVyYXRvciBvYmplY3Qgd2hlbiB0aGVcbiAgLy8gQEBpdGVyYXRvciBmdW5jdGlvbiBpcyBjYWxsZWQgb24gaXQuIFNvbWUgYnJvd3NlcnMnIGltcGxlbWVudGF0aW9ucyBvZiB0aGVcbiAgLy8gaXRlcmF0b3IgcHJvdG90eXBlIGNoYWluIGluY29ycmVjdGx5IGltcGxlbWVudCB0aGlzLCBjYXVzaW5nIHRoZSBHZW5lcmF0b3JcbiAgLy8gb2JqZWN0IHRvIG5vdCBiZSByZXR1cm5lZCBmcm9tIHRoaXMgY2FsbC4gVGhpcyBlbnN1cmVzIHRoYXQgZG9lc24ndCBoYXBwZW4uXG4gIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVnZW5lcmF0b3IvaXNzdWVzLzI3NCBmb3IgbW9yZSBkZXRhaWxzLlxuICBkZWZpbmUoR3AsIGl0ZXJhdG9yU3ltYm9sLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfSk7XG5cbiAgZGVmaW5lKEdwLCBcInRvU3RyaW5nXCIsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBcIltvYmplY3QgR2VuZXJhdG9yXVwiO1xuICB9KTtcblxuICBmdW5jdGlvbiBwdXNoVHJ5RW50cnkobG9jcykge1xuICAgIHZhciBlbnRyeSA9IHsgdHJ5TG9jOiBsb2NzWzBdIH07XG5cbiAgICBpZiAoMSBpbiBsb2NzKSB7XG4gICAgICBlbnRyeS5jYXRjaExvYyA9IGxvY3NbMV07XG4gICAgfVxuXG4gICAgaWYgKDIgaW4gbG9jcykge1xuICAgICAgZW50cnkuZmluYWxseUxvYyA9IGxvY3NbMl07XG4gICAgICBlbnRyeS5hZnRlckxvYyA9IGxvY3NbM107XG4gICAgfVxuXG4gICAgdGhpcy50cnlFbnRyaWVzLnB1c2goZW50cnkpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVzZXRUcnlFbnRyeShlbnRyeSkge1xuICAgIHZhciByZWNvcmQgPSBlbnRyeS5jb21wbGV0aW9uIHx8IHt9O1xuICAgIHJlY29yZC50eXBlID0gXCJub3JtYWxcIjtcbiAgICBkZWxldGUgcmVjb3JkLmFyZztcbiAgICBlbnRyeS5jb21wbGV0aW9uID0gcmVjb3JkO1xuICB9XG5cbiAgZnVuY3Rpb24gQ29udGV4dCh0cnlMb2NzTGlzdCkge1xuICAgIC8vIFRoZSByb290IGVudHJ5IG9iamVjdCAoZWZmZWN0aXZlbHkgYSB0cnkgc3RhdGVtZW50IHdpdGhvdXQgYSBjYXRjaFxuICAgIC8vIG9yIGEgZmluYWxseSBibG9jaykgZ2l2ZXMgdXMgYSBwbGFjZSB0byBzdG9yZSB2YWx1ZXMgdGhyb3duIGZyb21cbiAgICAvLyBsb2NhdGlvbnMgd2hlcmUgdGhlcmUgaXMgbm8gZW5jbG9zaW5nIHRyeSBzdGF0ZW1lbnQuXG4gICAgdGhpcy50cnlFbnRyaWVzID0gW3sgdHJ5TG9jOiBcInJvb3RcIiB9XTtcbiAgICB0cnlMb2NzTGlzdC5mb3JFYWNoKHB1c2hUcnlFbnRyeSwgdGhpcyk7XG4gICAgdGhpcy5yZXNldCh0cnVlKTtcbiAgfVxuXG4gIGV4cG9ydHMua2V5cyA9IGZ1bmN0aW9uKG9iamVjdCkge1xuICAgIHZhciBrZXlzID0gW107XG4gICAgZm9yICh2YXIga2V5IGluIG9iamVjdCkge1xuICAgICAga2V5cy5wdXNoKGtleSk7XG4gICAgfVxuICAgIGtleXMucmV2ZXJzZSgpO1xuXG4gICAgLy8gUmF0aGVyIHRoYW4gcmV0dXJuaW5nIGFuIG9iamVjdCB3aXRoIGEgbmV4dCBtZXRob2QsIHdlIGtlZXBcbiAgICAvLyB0aGluZ3Mgc2ltcGxlIGFuZCByZXR1cm4gdGhlIG5leHQgZnVuY3Rpb24gaXRzZWxmLlxuICAgIHJldHVybiBmdW5jdGlvbiBuZXh0KCkge1xuICAgICAgd2hpbGUgKGtleXMubGVuZ3RoKSB7XG4gICAgICAgIHZhciBrZXkgPSBrZXlzLnBvcCgpO1xuICAgICAgICBpZiAoa2V5IGluIG9iamVjdCkge1xuICAgICAgICAgIG5leHQudmFsdWUgPSBrZXk7XG4gICAgICAgICAgbmV4dC5kb25lID0gZmFsc2U7XG4gICAgICAgICAgcmV0dXJuIG5leHQ7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gVG8gYXZvaWQgY3JlYXRpbmcgYW4gYWRkaXRpb25hbCBvYmplY3QsIHdlIGp1c3QgaGFuZyB0aGUgLnZhbHVlXG4gICAgICAvLyBhbmQgLmRvbmUgcHJvcGVydGllcyBvZmYgdGhlIG5leHQgZnVuY3Rpb24gb2JqZWN0IGl0c2VsZi4gVGhpc1xuICAgICAgLy8gYWxzbyBlbnN1cmVzIHRoYXQgdGhlIG1pbmlmaWVyIHdpbGwgbm90IGFub255bWl6ZSB0aGUgZnVuY3Rpb24uXG4gICAgICBuZXh0LmRvbmUgPSB0cnVlO1xuICAgICAgcmV0dXJuIG5leHQ7XG4gICAgfTtcbiAgfTtcblxuICBmdW5jdGlvbiB2YWx1ZXMoaXRlcmFibGUpIHtcbiAgICBpZiAoaXRlcmFibGUpIHtcbiAgICAgIHZhciBpdGVyYXRvck1ldGhvZCA9IGl0ZXJhYmxlW2l0ZXJhdG9yU3ltYm9sXTtcbiAgICAgIGlmIChpdGVyYXRvck1ldGhvZCkge1xuICAgICAgICByZXR1cm4gaXRlcmF0b3JNZXRob2QuY2FsbChpdGVyYWJsZSk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgaXRlcmFibGUubmV4dCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHJldHVybiBpdGVyYWJsZTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFpc05hTihpdGVyYWJsZS5sZW5ndGgpKSB7XG4gICAgICAgIHZhciBpID0gLTEsIG5leHQgPSBmdW5jdGlvbiBuZXh0KCkge1xuICAgICAgICAgIHdoaWxlICgrK2kgPCBpdGVyYWJsZS5sZW5ndGgpIHtcbiAgICAgICAgICAgIGlmIChoYXNPd24uY2FsbChpdGVyYWJsZSwgaSkpIHtcbiAgICAgICAgICAgICAgbmV4dC52YWx1ZSA9IGl0ZXJhYmxlW2ldO1xuICAgICAgICAgICAgICBuZXh0LmRvbmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgcmV0dXJuIG5leHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbmV4dC52YWx1ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICBuZXh0LmRvbmUgPSB0cnVlO1xuXG4gICAgICAgICAgcmV0dXJuIG5leHQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIG5leHQubmV4dCA9IG5leHQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIGFuIGl0ZXJhdG9yIHdpdGggbm8gdmFsdWVzLlxuICAgIHJldHVybiB7IG5leHQ6IGRvbmVSZXN1bHQgfTtcbiAgfVxuICBleHBvcnRzLnZhbHVlcyA9IHZhbHVlcztcblxuICBmdW5jdGlvbiBkb25lUmVzdWx0KCkge1xuICAgIHJldHVybiB7IHZhbHVlOiB1bmRlZmluZWQsIGRvbmU6IHRydWUgfTtcbiAgfVxuXG4gIENvbnRleHQucHJvdG90eXBlID0ge1xuICAgIGNvbnN0cnVjdG9yOiBDb250ZXh0LFxuXG4gICAgcmVzZXQ6IGZ1bmN0aW9uKHNraXBUZW1wUmVzZXQpIHtcbiAgICAgIHRoaXMucHJldiA9IDA7XG4gICAgICB0aGlzLm5leHQgPSAwO1xuICAgICAgLy8gUmVzZXR0aW5nIGNvbnRleHQuX3NlbnQgZm9yIGxlZ2FjeSBzdXBwb3J0IG9mIEJhYmVsJ3NcbiAgICAgIC8vIGZ1bmN0aW9uLnNlbnQgaW1wbGVtZW50YXRpb24uXG4gICAgICB0aGlzLnNlbnQgPSB0aGlzLl9zZW50ID0gdW5kZWZpbmVkO1xuICAgICAgdGhpcy5kb25lID0gZmFsc2U7XG4gICAgICB0aGlzLmRlbGVnYXRlID0gbnVsbDtcblxuICAgICAgdGhpcy5tZXRob2QgPSBcIm5leHRcIjtcbiAgICAgIHRoaXMuYXJnID0gdW5kZWZpbmVkO1xuXG4gICAgICB0aGlzLnRyeUVudHJpZXMuZm9yRWFjaChyZXNldFRyeUVudHJ5KTtcblxuICAgICAgaWYgKCFza2lwVGVtcFJlc2V0KSB7XG4gICAgICAgIGZvciAodmFyIG5hbWUgaW4gdGhpcykge1xuICAgICAgICAgIC8vIE5vdCBzdXJlIGFib3V0IHRoZSBvcHRpbWFsIG9yZGVyIG9mIHRoZXNlIGNvbmRpdGlvbnM6XG4gICAgICAgICAgaWYgKG5hbWUuY2hhckF0KDApID09PSBcInRcIiAmJlxuICAgICAgICAgICAgICBoYXNPd24uY2FsbCh0aGlzLCBuYW1lKSAmJlxuICAgICAgICAgICAgICAhaXNOYU4oK25hbWUuc2xpY2UoMSkpKSB7XG4gICAgICAgICAgICB0aGlzW25hbWVdID0gdW5kZWZpbmVkO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBzdG9wOiBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuZG9uZSA9IHRydWU7XG5cbiAgICAgIHZhciByb290RW50cnkgPSB0aGlzLnRyeUVudHJpZXNbMF07XG4gICAgICB2YXIgcm9vdFJlY29yZCA9IHJvb3RFbnRyeS5jb21wbGV0aW9uO1xuICAgICAgaWYgKHJvb3RSZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgIHRocm93IHJvb3RSZWNvcmQuYXJnO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5ydmFsO1xuICAgIH0sXG5cbiAgICBkaXNwYXRjaEV4Y2VwdGlvbjogZnVuY3Rpb24oZXhjZXB0aW9uKSB7XG4gICAgICBpZiAodGhpcy5kb25lKSB7XG4gICAgICAgIHRocm93IGV4Y2VwdGlvbjtcbiAgICAgIH1cblxuICAgICAgdmFyIGNvbnRleHQgPSB0aGlzO1xuICAgICAgZnVuY3Rpb24gaGFuZGxlKGxvYywgY2F1Z2h0KSB7XG4gICAgICAgIHJlY29yZC50eXBlID0gXCJ0aHJvd1wiO1xuICAgICAgICByZWNvcmQuYXJnID0gZXhjZXB0aW9uO1xuICAgICAgICBjb250ZXh0Lm5leHQgPSBsb2M7XG5cbiAgICAgICAgaWYgKGNhdWdodCkge1xuICAgICAgICAgIC8vIElmIHRoZSBkaXNwYXRjaGVkIGV4Y2VwdGlvbiB3YXMgY2F1Z2h0IGJ5IGEgY2F0Y2ggYmxvY2ssXG4gICAgICAgICAgLy8gdGhlbiBsZXQgdGhhdCBjYXRjaCBibG9jayBoYW5kbGUgdGhlIGV4Y2VwdGlvbiBub3JtYWxseS5cbiAgICAgICAgICBjb250ZXh0Lm1ldGhvZCA9IFwibmV4dFwiO1xuICAgICAgICAgIGNvbnRleHQuYXJnID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuICEhIGNhdWdodDtcbiAgICAgIH1cblxuICAgICAgZm9yICh2YXIgaSA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLnRyeUVudHJpZXNbaV07XG4gICAgICAgIHZhciByZWNvcmQgPSBlbnRyeS5jb21wbGV0aW9uO1xuXG4gICAgICAgIGlmIChlbnRyeS50cnlMb2MgPT09IFwicm9vdFwiKSB7XG4gICAgICAgICAgLy8gRXhjZXB0aW9uIHRocm93biBvdXRzaWRlIG9mIGFueSB0cnkgYmxvY2sgdGhhdCBjb3VsZCBoYW5kbGVcbiAgICAgICAgICAvLyBpdCwgc28gc2V0IHRoZSBjb21wbGV0aW9uIHZhbHVlIG9mIHRoZSBlbnRpcmUgZnVuY3Rpb24gdG9cbiAgICAgICAgICAvLyB0aHJvdyB0aGUgZXhjZXB0aW9uLlxuICAgICAgICAgIHJldHVybiBoYW5kbGUoXCJlbmRcIik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZW50cnkudHJ5TG9jIDw9IHRoaXMucHJldikge1xuICAgICAgICAgIHZhciBoYXNDYXRjaCA9IGhhc093bi5jYWxsKGVudHJ5LCBcImNhdGNoTG9jXCIpO1xuICAgICAgICAgIHZhciBoYXNGaW5hbGx5ID0gaGFzT3duLmNhbGwoZW50cnksIFwiZmluYWxseUxvY1wiKTtcblxuICAgICAgICAgIGlmIChoYXNDYXRjaCAmJiBoYXNGaW5hbGx5KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcmV2IDwgZW50cnkuY2F0Y2hMb2MpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZShlbnRyeS5jYXRjaExvYywgdHJ1ZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucHJldiA8IGVudHJ5LmZpbmFsbHlMb2MpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZShlbnRyeS5maW5hbGx5TG9jKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgIH0gZWxzZSBpZiAoaGFzQ2F0Y2gpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXYgPCBlbnRyeS5jYXRjaExvYykge1xuICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlKGVudHJ5LmNhdGNoTG9jLCB0cnVlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgIH0gZWxzZSBpZiAoaGFzRmluYWxseSkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJldiA8IGVudHJ5LmZpbmFsbHlMb2MpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZShlbnRyeS5maW5hbGx5TG9jKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ0cnkgc3RhdGVtZW50IHdpdGhvdXQgY2F0Y2ggb3IgZmluYWxseVwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgYWJydXB0OiBmdW5jdGlvbih0eXBlLCBhcmcpIHtcbiAgICAgIGZvciAodmFyIGkgPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy50cnlFbnRyaWVzW2ldO1xuICAgICAgICBpZiAoZW50cnkudHJ5TG9jIDw9IHRoaXMucHJldiAmJlxuICAgICAgICAgICAgaGFzT3duLmNhbGwoZW50cnksIFwiZmluYWxseUxvY1wiKSAmJlxuICAgICAgICAgICAgdGhpcy5wcmV2IDwgZW50cnkuZmluYWxseUxvYykge1xuICAgICAgICAgIHZhciBmaW5hbGx5RW50cnkgPSBlbnRyeTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoZmluYWxseUVudHJ5ICYmXG4gICAgICAgICAgKHR5cGUgPT09IFwiYnJlYWtcIiB8fFxuICAgICAgICAgICB0eXBlID09PSBcImNvbnRpbnVlXCIpICYmXG4gICAgICAgICAgZmluYWxseUVudHJ5LnRyeUxvYyA8PSBhcmcgJiZcbiAgICAgICAgICBhcmcgPD0gZmluYWxseUVudHJ5LmZpbmFsbHlMb2MpIHtcbiAgICAgICAgLy8gSWdub3JlIHRoZSBmaW5hbGx5IGVudHJ5IGlmIGNvbnRyb2wgaXMgbm90IGp1bXBpbmcgdG8gYVxuICAgICAgICAvLyBsb2NhdGlvbiBvdXRzaWRlIHRoZSB0cnkvY2F0Y2ggYmxvY2suXG4gICAgICAgIGZpbmFsbHlFbnRyeSA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIHZhciByZWNvcmQgPSBmaW5hbGx5RW50cnkgPyBmaW5hbGx5RW50cnkuY29tcGxldGlvbiA6IHt9O1xuICAgICAgcmVjb3JkLnR5cGUgPSB0eXBlO1xuICAgICAgcmVjb3JkLmFyZyA9IGFyZztcblxuICAgICAgaWYgKGZpbmFsbHlFbnRyeSkge1xuICAgICAgICB0aGlzLm1ldGhvZCA9IFwibmV4dFwiO1xuICAgICAgICB0aGlzLm5leHQgPSBmaW5hbGx5RW50cnkuZmluYWxseUxvYztcbiAgICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLmNvbXBsZXRlKHJlY29yZCk7XG4gICAgfSxcblxuICAgIGNvbXBsZXRlOiBmdW5jdGlvbihyZWNvcmQsIGFmdGVyTG9jKSB7XG4gICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICB0aHJvdyByZWNvcmQuYXJnO1xuICAgICAgfVxuXG4gICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwiYnJlYWtcIiB8fFxuICAgICAgICAgIHJlY29yZC50eXBlID09PSBcImNvbnRpbnVlXCIpIHtcbiAgICAgICAgdGhpcy5uZXh0ID0gcmVjb3JkLmFyZztcbiAgICAgIH0gZWxzZSBpZiAocmVjb3JkLnR5cGUgPT09IFwicmV0dXJuXCIpIHtcbiAgICAgICAgdGhpcy5ydmFsID0gdGhpcy5hcmcgPSByZWNvcmQuYXJnO1xuICAgICAgICB0aGlzLm1ldGhvZCA9IFwicmV0dXJuXCI7XG4gICAgICAgIHRoaXMubmV4dCA9IFwiZW5kXCI7XG4gICAgICB9IGVsc2UgaWYgKHJlY29yZC50eXBlID09PSBcIm5vcm1hbFwiICYmIGFmdGVyTG9jKSB7XG4gICAgICAgIHRoaXMubmV4dCA9IGFmdGVyTG9jO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9LFxuXG4gICAgZmluaXNoOiBmdW5jdGlvbihmaW5hbGx5TG9jKSB7XG4gICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpXTtcbiAgICAgICAgaWYgKGVudHJ5LmZpbmFsbHlMb2MgPT09IGZpbmFsbHlMb2MpIHtcbiAgICAgICAgICB0aGlzLmNvbXBsZXRlKGVudHJ5LmNvbXBsZXRpb24sIGVudHJ5LmFmdGVyTG9jKTtcbiAgICAgICAgICByZXNldFRyeUVudHJ5KGVudHJ5KTtcbiAgICAgICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBcImNhdGNoXCI6IGZ1bmN0aW9uKHRyeUxvYykge1xuICAgICAgZm9yICh2YXIgaSA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLnRyeUVudHJpZXNbaV07XG4gICAgICAgIGlmIChlbnRyeS50cnlMb2MgPT09IHRyeUxvYykge1xuICAgICAgICAgIHZhciByZWNvcmQgPSBlbnRyeS5jb21wbGV0aW9uO1xuICAgICAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgICB2YXIgdGhyb3duID0gcmVjb3JkLmFyZztcbiAgICAgICAgICAgIHJlc2V0VHJ5RW50cnkoZW50cnkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gdGhyb3duO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFRoZSBjb250ZXh0LmNhdGNoIG1ldGhvZCBtdXN0IG9ubHkgYmUgY2FsbGVkIHdpdGggYSBsb2NhdGlvblxuICAgICAgLy8gYXJndW1lbnQgdGhhdCBjb3JyZXNwb25kcyB0byBhIGtub3duIGNhdGNoIGJsb2NrLlxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiaWxsZWdhbCBjYXRjaCBhdHRlbXB0XCIpO1xuICAgIH0sXG5cbiAgICBkZWxlZ2F0ZVlpZWxkOiBmdW5jdGlvbihpdGVyYWJsZSwgcmVzdWx0TmFtZSwgbmV4dExvYykge1xuICAgICAgdGhpcy5kZWxlZ2F0ZSA9IHtcbiAgICAgICAgaXRlcmF0b3I6IHZhbHVlcyhpdGVyYWJsZSksXG4gICAgICAgIHJlc3VsdE5hbWU6IHJlc3VsdE5hbWUsXG4gICAgICAgIG5leHRMb2M6IG5leHRMb2NcbiAgICAgIH07XG5cbiAgICAgIGlmICh0aGlzLm1ldGhvZCA9PT0gXCJuZXh0XCIpIHtcbiAgICAgICAgLy8gRGVsaWJlcmF0ZWx5IGZvcmdldCB0aGUgbGFzdCBzZW50IHZhbHVlIHNvIHRoYXQgd2UgZG9uJ3RcbiAgICAgICAgLy8gYWNjaWRlbnRhbGx5IHBhc3MgaXQgb24gdG8gdGhlIGRlbGVnYXRlLlxuICAgICAgICB0aGlzLmFyZyA9IHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgfVxuICB9O1xuXG4gIC8vIFJlZ2FyZGxlc3Mgb2Ygd2hldGhlciB0aGlzIHNjcmlwdCBpcyBleGVjdXRpbmcgYXMgYSBDb21tb25KUyBtb2R1bGVcbiAgLy8gb3Igbm90LCByZXR1cm4gdGhlIHJ1bnRpbWUgb2JqZWN0IHNvIHRoYXQgd2UgY2FuIGRlY2xhcmUgdGhlIHZhcmlhYmxlXG4gIC8vIHJlZ2VuZXJhdG9yUnVudGltZSBpbiB0aGUgb3V0ZXIgc2NvcGUsIHdoaWNoIGFsbG93cyB0aGlzIG1vZHVsZSB0byBiZVxuICAvLyBpbmplY3RlZCBlYXNpbHkgYnkgYGJpbi9yZWdlbmVyYXRvciAtLWluY2x1ZGUtcnVudGltZSBzY3JpcHQuanNgLlxuICByZXR1cm4gZXhwb3J0cztcblxufShcbiAgLy8gSWYgdGhpcyBzY3JpcHQgaXMgZXhlY3V0aW5nIGFzIGEgQ29tbW9uSlMgbW9kdWxlLCB1c2UgbW9kdWxlLmV4cG9ydHNcbiAgLy8gYXMgdGhlIHJlZ2VuZXJhdG9yUnVudGltZSBuYW1lc3BhY2UuIE90aGVyd2lzZSBjcmVhdGUgYSBuZXcgZW1wdHlcbiAgLy8gb2JqZWN0LiBFaXRoZXIgd2F5LCB0aGUgcmVzdWx0aW5nIG9iamVjdCB3aWxsIGJlIHVzZWQgdG8gaW5pdGlhbGl6ZVxuICAvLyB0aGUgcmVnZW5lcmF0b3JSdW50aW1lIHZhcmlhYmxlIGF0IHRoZSB0b3Agb2YgdGhpcyBmaWxlLlxuICB0eXBlb2YgbW9kdWxlID09PSBcIm9iamVjdFwiID8gbW9kdWxlLmV4cG9ydHMgOiB7fVxuKSk7XG5cbnRyeSB7XG4gIHJlZ2VuZXJhdG9yUnVudGltZSA9IHJ1bnRpbWU7XG59IGNhdGNoIChhY2NpZGVudGFsU3RyaWN0TW9kZSkge1xuICAvLyBUaGlzIG1vZHVsZSBzaG91bGQgbm90IGJlIHJ1bm5pbmcgaW4gc3RyaWN0IG1vZGUsIHNvIHRoZSBhYm92ZVxuICAvLyBhc3NpZ25tZW50IHNob3VsZCBhbHdheXMgd29yayB1bmxlc3Mgc29tZXRoaW5nIGlzIG1pc2NvbmZpZ3VyZWQuIEp1c3RcbiAgLy8gaW4gY2FzZSBydW50aW1lLmpzIGFjY2lkZW50YWxseSBydW5zIGluIHN0cmljdCBtb2RlLCBpbiBtb2Rlcm4gZW5naW5lc1xuICAvLyB3ZSBjYW4gZXhwbGljaXRseSBhY2Nlc3MgZ2xvYmFsVGhpcy4gSW4gb2xkZXIgZW5naW5lcyB3ZSBjYW4gZXNjYXBlXG4gIC8vIHN0cmljdCBtb2RlIHVzaW5nIGEgZ2xvYmFsIEZ1bmN0aW9uIGNhbGwuIFRoaXMgY291bGQgY29uY2VpdmFibHkgZmFpbFxuICAvLyBpZiBhIENvbnRlbnQgU2VjdXJpdHkgUG9saWN5IGZvcmJpZHMgdXNpbmcgRnVuY3Rpb24sIGJ1dCBpbiB0aGF0IGNhc2VcbiAgLy8gdGhlIHByb3BlciBzb2x1dGlvbiBpcyB0byBmaXggdGhlIGFjY2lkZW50YWwgc3RyaWN0IG1vZGUgcHJvYmxlbS4gSWZcbiAgLy8geW91J3ZlIG1pc2NvbmZpZ3VyZWQgeW91ciBidW5kbGVyIHRvIGZvcmNlIHN0cmljdCBtb2RlIGFuZCBhcHBsaWVkIGFcbiAgLy8gQ1NQIHRvIGZvcmJpZCBGdW5jdGlvbiwgYW5kIHlvdSdyZSBub3Qgd2lsbGluZyB0byBmaXggZWl0aGVyIG9mIHRob3NlXG4gIC8vIHByb2JsZW1zLCBwbGVhc2UgZGV0YWlsIHlvdXIgdW5pcXVlIHByZWRpY2FtZW50IGluIGEgR2l0SHViIGlzc3VlLlxuICBpZiAodHlwZW9mIGdsb2JhbFRoaXMgPT09IFwib2JqZWN0XCIpIHtcbiAgICBnbG9iYWxUaGlzLnJlZ2VuZXJhdG9yUnVudGltZSA9IHJ1bnRpbWU7XG4gIH0gZWxzZSB7XG4gICAgRnVuY3Rpb24oXCJyXCIsIFwicmVnZW5lcmF0b3JSdW50aW1lID0gclwiKShydW50aW1lKTtcbiAgfVxufVxuIiwiY2xhc3MgSW1nQkIge1xuICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgdGhpcy5pZCA9IGRhdGFbYGlkYF07XG4gICAgdGhpcy50aXRsZSA9IGRhdGFbYHRpdGxlYF07XG4gICAgdGhpcy51cmwgPSBkYXRhW2B1cmxgXTtcbiAgfVxuXG4gIHN0YXRpYyBwYXJzZUltZyhkYXRhKSB7XG4gICAgcmV0dXJuIG5ldyBJbWdCQihkYXRhKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBJbWdCQjtcbiIsImltcG9ydCB7Y3JlYXRlRWxlbWVudH0gZnJvbSBcIi4uL3V0aWxzL3V0aWxzXCI7XG5cblxuY2xhc3MgQWJzdHJhY3RDb21wb25lbnQge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBpZiAobmV3LnRhcmdldCA9PT0gQWJzdHJhY3RDb21wb25lbnQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQ2FuJ3QgaW5zdGFudGlhdGUgQWJzdHJhY3RDb21wb25lbnQsIG9ubHkgY29uY3JldGUgb25lLmApO1xuICAgIH1cblxuICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xuICB9XG5cbiAgZ2V0RWxlbWVudCgpIHtcbiAgICBpZiAoIXRoaXMuX2VsZW1lbnQpIHtcbiAgICAgIHRoaXMuX2VsZW1lbnQgPSBjcmVhdGVFbGVtZW50KHRoaXMuX2dldFRlbXBsYXRlKCkpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICB9XG5cbiAgcmVtb3ZlRWxlbWVudCgpIHtcbiAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgfVxuXG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEFic3RyYWN0IG1ldGhvZCBub3QgaW1wbGVtZW50ZWQ6IGdldFRlbXBsYXRlYCk7XG4gIH1cbn1cblxuXG5leHBvcnQgZGVmYXVsdCBBYnN0cmFjdENvbXBvbmVudDtcbiIsImltcG9ydCBBYnN0cmFjdENvbXBvbmVudCBmcm9tIFwiLi9hYnN0cmFjdC1jb21wb25lbnRcIjtcblxuY2xhc3MgSW1nSXRlbSBleHRlbmRzIEFic3RyYWN0Q29tcG9uZW50IHtcbiAgY29uc3RydWN0b3Ioe3VybCA9IGBodHRwczovL3ZpYS5wbGFjZWhvbGRlci5jb20vMjYweDIwMGAsIHRpdGxlID0gYGltYWdlYH0pIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy5fdXJsID0gdXJsO1xuICAgIHRoaXMuX3RpdGxlID0gdGl0bGU7XG4gIH1cblxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgcmV0dXJuIGA8bGkgY2xhc3M9XCJpbWctbGlzdF9faXRlbVwiPlxuICAgICAgICAgICAgICA8aW1nIGNsYXNzPVwiaW1hZ2VcIiBzcmM9XCIke3RoaXMuX3VybH1cIiBhbHQ9XCIke3RoaXMuX3RpdGxlfVwiIHdpZHRoPVwiMjYwXCIgaGVpZ2h0PVwiMjAwXCI+XG4gICAgICAgICAgICA8L2xpPmA7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgSW1nSXRlbTtcbiIsImltcG9ydCBBYnN0cmFjdENvbXBvbmVudCBmcm9tIFwiLi9hYnN0cmFjdC1jb21wb25lbnRcIjtcblxuY2xhc3MgSW1nTGlzdCBleHRlbmRzIEFic3RyYWN0Q29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgfVxuXG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICByZXR1cm4gYDx1bCBjbGFzcz1cImltZy1saXN0IHdvcmstYXJlYV9faW1nLWxpc3RcIj48L3VsPmA7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgSW1nTGlzdDtcbiIsImltcG9ydCBBYnN0cmFjdENvbXBvbmVudCBmcm9tIFwiLi9hYnN0cmFjdC1jb21wb25lbnRcIjtcbmltcG9ydCB7VGFnTmFtZX0gZnJvbSBcIi4uL2VudW0vZW51bVwiO1xuXG5jbGFzcyBJbWdVcGxvYWRlciBleHRlbmRzIEFic3RyYWN0Q29tcG9uZW50IHtcbiAgY29uc3RydWN0b3Ioe29uSW1hZ2VTdWJtaXQgPSAoKSA9PiB7fX0pIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy5fb25JbWFnZVN1Ym1pdCA9IG9uSW1hZ2VTdWJtaXQ7XG4gICAgdGhpcy5faW5wdXROYW1lID0gdGhpcy5nZXRFbGVtZW50KCkucXVlcnlTZWxlY3RvcihgI2ltZy11cGxvYWRlcl9faW5wdXQtbmFtZWApO1xuICAgIHRoaXMuX2lucHV0SW1nID0gdGhpcy5nZXRFbGVtZW50KCkucXVlcnlTZWxlY3RvcihgI2ltZy11cGxvYWRlcl9faW5wdXQtaW1nYCk7XG4gICAgdGhpcy5nZXRFbGVtZW50KCkuYWRkRXZlbnRMaXN0ZW5lcihgY2xpY2tgLCAoZXZ0KSA9PiB0aGlzLl9vbkZvcm1DbGljayhldnQpKTtcbiAgfVxuXG4gIGJsb2NrKCkge1xuICAgIHRoaXMuZ2V0RWxlbWVudCgpLmNsYXNzTGlzdC5hZGQoYGltZy11cGxvYWRlci0tYmxvY2tgKTtcbiAgfVxuXG4gIHVuQmxvY2soKSB7XG4gICAgdGhpcy5nZXRFbGVtZW50KCkuY2xhc3NMaXN0LnJlbW92ZShgaW1nLXVwbG9hZGVyLS1ibG9ja2ApO1xuICB9XG5cbiAgX29uRm9ybUNsaWNrKGV2dCkge1xuICAgIGNvbnN0IGZvcm0gPSBldnQuY3VycmVudFRhcmdldDtcbiAgICBjb25zdCB0YXJnZXQgPSBldnQudGFyZ2V0O1xuXG4gICAgaWYgKHRhcmdldC5ub2RlTmFtZSAhPT0gVGFnTmFtZS5CVVRUT04pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIWZvcm0ucmVwb3J0VmFsaWRpdHkoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKGZvcm0pO1xuICAgIHRoaXMuX29uSW1hZ2VTdWJtaXQoZm9ybURhdGEpO1xuICAgIHRoaXMuX2lucHV0TmFtZS52YWx1ZSA9IGBgO1xuICAgIHRoaXMuX2lucHV0SW1nLnZhbHVlID0gYGA7XG4gIH1cblxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgcmV0dXJuIGA8Zm9ybSBjbGFzcz1cImltZy11cGxvYWRlciB3b3JrLWFyZWFfX2ltZy11cGxvYWRlclwiIG1ldGhvZD1cInBvc3RcIiBhY3Rpb249XCIjXCI+XG4gICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwiaW1nLXVwbG9hZGVyX19sYWJlbFwiIGZvcj1cImltZy11cGxvYWRlcl9faW5wdXQtbmFtZVwiPtCd0LDQt9Cy0LDQvdC40LUg0LjQt9C+0LHRgNCw0LbQtdC90LjRjyAoW2EtekEtWjAtOV0pOjwvbGFiZWw+XG4gICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPVwiaW1nLXVwbG9hZGVyX19pbnB1dFwiIHR5cGU9XCJ0ZXh0XCIgaWQ9XCJpbWctdXBsb2FkZXJfX2lucHV0LW5hbWVcIiBuYW1lPVwibmFtZVwiIHBhdHRlcm49XCJeW2EtekEtWjAtOV0rJFwiPlxuICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cImltZy11cGxvYWRlcl9fbGFiZWxcIiBmb3I9XCJpbWctdXBsb2FkZXJfX2lucHV0LWltZ1wiPtCS0YvQsdC10YDQuNGC0LUg0LjQt9Cx0L7RgNCw0LbQtdC90LjQtTo8L2xhYmVsPlxuICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cImltZy11cGxvYWRlcl9faW5wdXRcIiB0eXBlPVwiZmlsZVwiIGlkPVwiaW1nLXVwbG9hZGVyX19pbnB1dC1pbWdcIiBuYW1lPVwiaW1hZ2VcIiBhY2NlcHQ9XCJpbWFnZS8qXCIgcmVxdWlyZWQ+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImltZy11cGxvYWRlcl9fYnRuXCIgdHlwZT1cInN1Ym1pdFwiPtCe0YLQv9GA0LDQstC40YLRjDwvYnV0dG9uPlxuICAgICAgICAgICAgICA8L2Zvcm0+YDtcbiAgfVxufVxuXG5cbmV4cG9ydCBkZWZhdWx0IEltZ1VwbG9hZGVyO1xuIiwiaW1wb3J0IEFic3RyYWN0Q29tcG9uZW50IGZyb20gXCIuL2Fic3RyYWN0LWNvbXBvbmVudFwiO1xuXG5cbmNsYXNzIExvYWRlciBleHRlbmRzIEFic3RyYWN0Q29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIHRoaXMuX3BpbiA9IHRoaXMuZ2V0RWxlbWVudCgpLnF1ZXJ5U2VsZWN0b3IoYC5sb2FkZXJfX3BpbmApO1xuICAgIHRoaXMuX3JlcSA9IG51bGw7XG4gICAgdGhpcy5fZGVnID0gMDtcblxuICAgIHRoaXMuX3Jlc2V0KCk7XG4gIH1cblxuICBzdGFydEFuaW1hdGlvbigpIHtcbiAgICB0aGlzLl9waW4uc3R5bGUuZGlzcGxheSA9IGBgO1xuXG4gICAgY29uc3Qgc3RlcCA9ICgpID0+IHtcbiAgICAgIHRoaXMuX2RlZyA9IHRoaXMuX2RlZyA9PT0gMzYwID8gMCA6IHRoaXMuX2RlZyArIDU7XG4gICAgICB0aGlzLl9waW4uc3R5bGUudHJhbnNmb3JtID0gYHJvdGF0ZVkoJHt0aGlzLl9kZWd9ZGVnKWA7XG4gICAgICB0aGlzLl9yZXEgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc3RlcCk7XG4gICAgfTtcblxuICAgIHRoaXMuX3JlcSA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShzdGVwKTtcbiAgfVxuXG4gIHN0b3BBbmltYXRpb24oKSB7XG4gICAgaWYgKHRoaXMuX3JlcSAhPT0gbnVsbCkge1xuICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5fcmVxKTtcbiAgICB9XG4gICAgdGhpcy5fcmVzZXQoKTtcbiAgfVxuXG4gIF9yZXNldCgpIHtcbiAgICB0aGlzLl9waW4uc3R5bGUuZGlzcGxheSA9IGBub25lYDtcbiAgICB0aGlzLl9waW4uc3R5bGUudHJhbnNmb3JtID0gYGA7XG4gICAgdGhpcy5fcmVxID0gbnVsbDtcbiAgICB0aGlzLl9kZWcgPSAwO1xuICB9XG5cbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIHJldHVybiBgPGRpdiBjbGFzcz1cImxvYWRlclwiPjxkaXYgY2xhc3M9XCJsb2FkZXJfX3BpblwiPjwvZGl2PjwvZGl2PmA7XG4gIH1cbn1cblxuXG5leHBvcnQgZGVmYXVsdCBMb2FkZXI7XG4iLCJjb25zdCBpbWFnZXNTdG9yZUNvbmZpZyA9IHtcbiAgc3RvcmFnZTogbG9jYWxTdG9yYWdlLFxuICBrZXk6IGBpbWdzU2VudFRvSW1nQkJgLFxuICBpbml0aWFsRGF0YTogW11cbn07XG5cbmV4cG9ydCBkZWZhdWx0IGltYWdlc1N0b3JlQ29uZmlnO1xuIiwiY29uc3QgSW1nQkJTZXJ2ZXJDb25maWcgPSB7XG4gIGVuZFBvaW50OiBgaHR0cHM6Ly9hcGkuaW1nYmIuY29tLzFgLFxuICBhcGlLZXk6IGA5MzhhYzFlYjUxY2JjNzVkYzc0NzZlZGRlMTM1MGI2NWBcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEltZ0JCU2VydmVyQ29uZmlnO1xuIiwiaW1wb3J0IHtyZW5kZXJ9IGZyb20gXCIuLi91dGlscy91dGlsc1wiO1xuaW1wb3J0IEltZ1VwbG9hZGVyIGZyb20gXCIuLi9jb21wb25lbnRzL2ltZy11cGxvYWRlclwiO1xuaW1wb3J0IEltZ0xpc3QgZnJvbSBcIi4uL2NvbXBvbmVudHMvaW1nLWxpc3RcIjtcbmltcG9ydCBJbWdJdGVtIGZyb20gXCIuLi9jb21wb25lbnRzL2ltZy1pdGVtXCI7XG5pbXBvcnQge1Bvc2l0aW9ufSBmcm9tIFwiLi4vZW51bS9lbnVtXCI7XG5pbXBvcnQgTG9hZGVyIGZyb20gXCIuLi9jb21wb25lbnRzL2xvYWRlclwiO1xuXG5jbGFzcyBHYWxsZXJ5Q29udHJvbGxlciB7XG4gIGNvbnN0cnVjdG9yKGNvbnRhaW5lciwgb25JbWFnZVN1Ym1pdCA9ICgpID0+IHt9KSB7XG4gICAgdGhpcy5fY29udGFpbmVyID0gY29udGFpbmVyO1xuXG4gICAgdGhpcy5faW1nVXBsb2FkZXIgPSBuZXcgSW1nVXBsb2FkZXIoe29uSW1hZ2VTdWJtaXQ6IChmb3JtRGF0YSkgPT4ge1xuICAgICAgdGhpcy5fb25JbWFnZVN1Ym1pdCgpO1xuICAgICAgb25JbWFnZVN1Ym1pdChmb3JtRGF0YSk7XG4gICAgfX0pO1xuXG4gICAgdGhpcy5fbG9hZGVyID0gbmV3IExvYWRlcigpO1xuXG4gICAgdGhpcy5faW1nTGlzdCA9IG5ldyBJbWdMaXN0KCk7XG4gICAgdGhpcy5faW5pdCgpO1xuICB9XG5cbiAgdXBkYXRlSW1hZ2VzKGltYWdlcykge1xuICAgIHRoaXMuX2ltZ0xpc3QuZ2V0RWxlbWVudCgpLmlubmVySFRNTCA9IGBgO1xuICAgIGltYWdlcy5mb3JFYWNoKChpbWFnZSkgPT4ge1xuICAgICAgcmVuZGVyKHRoaXMuX2ltZ0xpc3QuZ2V0RWxlbWVudCgpLCBuZXcgSW1nSXRlbShpbWFnZSkuZ2V0RWxlbWVudCgpLCBQb3NpdGlvbi5CRUZPUkVFTkQpO1xuICAgIH0pO1xuICAgIHRoaXMudW5sb2NrKCk7XG4gIH1cblxuICB1bmxvY2soKSB7XG4gICAgdGhpcy5faW1nVXBsb2FkZXIudW5CbG9jaygpO1xuICAgIHRoaXMuX2xvYWRlci5zdG9wQW5pbWF0aW9uKCk7XG4gIH1cblxuICBfaW5pdCgpIHtcbiAgICByZW5kZXIodGhpcy5fY29udGFpbmVyLCB0aGlzLl9pbWdVcGxvYWRlci5nZXRFbGVtZW50KCksIFBvc2l0aW9uLkJFRk9SRUVORCk7XG4gICAgcmVuZGVyKHRoaXMuX2NvbnRhaW5lciwgdGhpcy5fbG9hZGVyLmdldEVsZW1lbnQoKSwgUG9zaXRpb24uQkVGT1JFRU5EKTtcbiAgICByZW5kZXIodGhpcy5fY29udGFpbmVyLCB0aGlzLl9pbWdMaXN0LmdldEVsZW1lbnQoKSwgUG9zaXRpb24uQkVGT1JFRU5EKTtcbiAgfVxuXG4gIF9vbkltYWdlU3VibWl0KCkge1xuICAgIHRoaXMuX2ltZ1VwbG9hZGVyLmJsb2NrKCk7XG4gICAgdGhpcy5fbG9hZGVyLnN0YXJ0QW5pbWF0aW9uKCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgR2FsbGVyeUNvbnRyb2xsZXI7XG4iLCJleHBvcnQgY29uc3QgTWV0aG9kID0ge1xuICBHRVQ6IGBnZXRgLFxuICBQT1NUOiBgcG9zdGBcbn07XG5cbmV4cG9ydCBjb25zdCBQb3NpdGlvbiA9IHtcbiAgQUZURVJCRUdJTjogYGFmdGVyYmVnaW5gLFxuICBCRUZPUkVFTkQ6IGBiZWZvcmVlbmRgXG59O1xuXG5leHBvcnQgY29uc3QgVGFnTmFtZSA9IHtcbiAgSU5QVVQ6IGBJTlBVVGAsXG4gIEJVVFRPTjogYEJVVFRPTmAsXG4gIExBQkVMOiBgTEFCRUxgXG59O1xuIiwiaW1wb3J0IEFwaSBmcm9tIFwiLi9zZXJ2ZXIvYXBpXCI7XG5pbXBvcnQgSW1nQkJTZXJ2ZXJDb25maWcgZnJvbSBcIi4vY29uZmlncy9pbWctYi1iLXNlcnZlci1jb25maWdcIjtcbmltcG9ydCBHYWxsZXJ5Q29udHJvbGxlciBmcm9tIFwiLi9jb250cm9sbGVycy9nYWxsZXJ5LWNvbnRyb2xsZXJcIjtcbmltcG9ydCB7ZW5jb2RlVG9CYXNlNjR9IGZyb20gXCIuL3V0aWxzL3V0aWxzXCI7XG5pbXBvcnQgaW1hZ2VzU3RvcmVDb25maWcgZnJvbSBcIi4vY29uZmlncy9pbWFnZXMtc3RvcmUtY29uZmlnXCI7XG5pbXBvcnQgQXJyU3RvcmUgZnJvbSBcIi4vc3RvcmFnZS9hcnItc3RvcmVcIjtcblxuXG5jb25zdCBpbWdCQkFQSSA9IG5ldyBBcGkoSW1nQkJTZXJ2ZXJDb25maWcpO1xuY29uc3QgaW1hZ2VzU3RvcmUgPSBuZXcgQXJyU3RvcmUoaW1hZ2VzU3RvcmVDb25maWcpO1xuXG5jb25zdCBvbkltYWdlU3VibWl0ID0gYXN5bmMgKGZvcm1EYXRhKSA9PiB7XG4gIGNvbnN0IGltYWdlRmlsZSA9IGZvcm1EYXRhLmdldChgaW1hZ2VgKTtcblxuICBjb25zdCBpbWdCYXNlNjQgPSBhd2FpdCBlbmNvZGVUb0Jhc2U2NChpbWFnZUZpbGUpO1xuICBmb3JtRGF0YS5zZXQoYGltYWdlYCwgaW1nQmFzZTY0LnJlcGxhY2UoL14uKiwvLCBgYCkpO1xuXG4gIGNvbnN0IHVwbG9hZGVkRGF0YSA9IGF3YWl0IGltZ0JCQVBJLnVwbG9hZEltZyhmb3JtRGF0YSk7XG4gIGlmIChpbWFnZXNTdG9yZS5kYXRhLmV2ZXJ5KChpbWFnZSkgPT4gaW1hZ2UuaWQgIT09IHVwbG9hZGVkRGF0YS5pZCkpIHtcbiAgICBpbWFnZXNTdG9yZS5wdXNoKHVwbG9hZGVkRGF0YSk7XG4gICAgZ2FsbGVyeUNvbnRyb2xsZXIudXBkYXRlSW1hZ2VzKGltYWdlc1N0b3JlLmRhdGEpO1xuXG4gICAgcmV0dXJuO1xuICB9XG5cbiAgYWxlcnQoYEltYWdlIGluIGdhbGxlcnkgYWxyZWFkeSEhIWApO1xuICBnYWxsZXJ5Q29udHJvbGxlci51bmxvY2soKTtcbn07XG5cbmNvbnN0IGdhbGxlcnlDb250cm9sbGVyID0gbmV3IEdhbGxlcnlDb250cm9sbGVyKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNyb290YCksIG9uSW1hZ2VTdWJtaXQpO1xuZ2FsbGVyeUNvbnRyb2xsZXIudXBkYXRlSW1hZ2VzKGltYWdlc1N0b3JlLmRhdGEpO1xuIiwiaW1wb3J0IHtNZXRob2R9IGZyb20gXCIuLi9lbnVtL2VudW1cIjtcbmltcG9ydCB7dG9KU09OfSBmcm9tIFwiLi4vdXRpbHMvdXRpbHNcIjtcbmltcG9ydCBJbWdCQiBmcm9tIFwiLi4vYWRhcHRlcnMvaW1nLWJiXCI7XG5cblxuY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3Ioe2VuZFBvaW50LCBhcGlLZXl9KSB7XG4gICAgdGhpcy5fZW5kUG9pbnQgPSBlbmRQb2ludDtcbiAgICB0aGlzLl9hcGlLZXkgPSBhcGlLZXk7XG4gIH1cblxuICB1cGxvYWRJbWcoZm9ybURhdGEpIHtcbiAgICBmb3JtRGF0YS5zZXQoYGtleWAsIHRoaXMuX2FwaUtleSk7XG4gICAgcmV0dXJuIHRoaXMuX2xvYWQoe1xuICAgICAgdXJsOiBgdXBsb2FkYCxcbiAgICAgIG1ldGhvZDogTWV0aG9kLlBPU1QsXG4gICAgICB0aW1lb3V0OiAxMDAwMCxcbiAgICAgIGJvZHk6IGZvcm1EYXRhXG4gICAgfSlcbiAgICAgIC50aGVuKHRvSlNPTilcbiAgICAgIC50aGVuKChqc29uRGF0YSkgPT4gSW1nQkIucGFyc2VJbWcoanNvbkRhdGEuZGF0YSkpO1xuICB9XG4gIF9sb2FkKHt1cmwsIG1ldGhvZCA9IE1ldGhvZC5HRVQsIGJvZHkgPSBudWxsLCBoZWFkZXJzID0gbmV3IEhlYWRlcnMoKSwgdGltZW91dCA9IDUwMDB9KSB7XG4gICAgY29uc3QgY2hlY2tTdGF0dXMgPSAocmVzcG9uc2UpID0+IHtcbiAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPj0gMjAwICYmIHJlc3BvbnNlLnN0YXR1cyA8IDMwMCkge1xuICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7cmVzcG9uc2Uuc3RhdHVzfTogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fZW5kUG9pbnR9LyR7dXJsfWAsIHttZXRob2QsIGJvZHksIGhlYWRlcnMsIHRpbWVvdXR9KVxuICAgICAgLnRoZW4oY2hlY2tTdGF0dXMpXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICB0aHJvdyBlcnI7XG4gICAgICB9KTtcbiAgfVxufVxuXG5cbmV4cG9ydCBkZWZhdWx0IEFwaTtcbiIsImNsYXNzIEFyclN0b3JlIHtcbiAgY29uc3RydWN0b3Ioe3N0b3JhZ2UsIGtleSwgaW5pdGlhbERhdGF9KSB7XG4gICAgdGhpcy5fc3RvcmFnZSA9IHN0b3JhZ2U7XG4gICAgdGhpcy5fa2V5ID0ga2V5O1xuXG4gICAgaWYgKCF0aGlzLmlzSW5TdG9yYWdlKSB7XG4gICAgICB0aGlzLl9zdG9yYWdlLnNldEl0ZW0odGhpcy5fa2V5LCBKU09OLnN0cmluZ2lmeShpbml0aWFsRGF0YSkpO1xuICAgIH1cblxuICAgIHRoaXMuX2RhdGEgPSBKU09OLnBhcnNlKHRoaXMuX3N0b3JhZ2UuZ2V0SXRlbSh0aGlzLl9rZXkpKTtcbiAgfVxuXG4gIGdldCBpc0luU3RvcmFnZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fc3RvcmFnZS5nZXRJdGVtKHRoaXMuX2tleSkgIT09IG51bGw7XG4gIH1cblxuICBnZXQgZGF0YSgpIHtcbiAgICByZXR1cm4gdGhpcy5fZGF0YS5tYXAoKG9iaikgPT4gT2JqZWN0LmFzc2lnbih7fSwgb2JqKSk7XG4gIH1cblxuICBwdXNoKGRhdGEpIHtcbiAgICB0aGlzLl9kYXRhLnB1c2goZGF0YSk7XG4gICAgdGhpcy5fc2F2ZSgpO1xuICB9XG5cbiAgX3NhdmUoKSB7XG4gICAgdGhpcy5fc3RvcmFnZS5zZXRJdGVtKHRoaXMuX2tleSwgSlNPTi5zdHJpbmdpZnkodGhpcy5fZGF0YSkpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEFyclN0b3JlO1xuIiwiaW1wb3J0IHtQb3NpdGlvbn0gZnJvbSBcIi4uL2VudW0vZW51bVwiO1xuXG5leHBvcnQgY29uc3QgdG9KU09OID0gKHJlc3BvbnNlKSA9PiB7XG4gIHJldHVybiByZXNwb25zZS5qc29uKCk7XG59O1xuXG5leHBvcnQgY29uc3QgY3JlYXRlRWxlbWVudCA9ICh0ZW1wbGF0ZSkgPT4ge1xuICBjb25zdCBuZXdFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChgZGl2YCk7XG4gIG5ld0VsZW1lbnQuaW5uZXJIVE1MID0gdGVtcGxhdGU7XG4gIHJldHVybiBuZXdFbGVtZW50LmZpcnN0Q2hpbGQ7XG59O1xuXG5leHBvcnQgY29uc3QgcmVuZGVyID0gKGNvbnRhaW5lciwgZWxlbWVudCwgcGxhY2UpID0+IHtcbiAgc3dpdGNoIChwbGFjZSkge1xuICAgIGNhc2UgUG9zaXRpb24uQUZURVJCRUdJTjpcbiAgICAgIGNvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBQb3NpdGlvbi5CRUZPUkVFTkQ6XG4gICAgICBjb250YWluZXIuYXBwZW5kKGVsZW1lbnQpO1xuICAgICAgYnJlYWs7XG5cbiAgICBkZWZhdWx0OlxuICAgICAgYnJlYWs7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCB1bm1vdW50ID0gKGVsZW1lbnQpID0+IHtcbiAgaWYgKGVsZW1lbnQpIHtcbiAgICBlbGVtZW50LnJlbW92ZSgpO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgZW5jb2RlVG9CYXNlNjQgPSAoZmlsZSkgPT4ge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7XG4gICAgcmVhZGVyLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgIHJlc29sdmUocmVhZGVyLnJlc3VsdCk7XG4gICAgfTtcbiAgICByZWFkZXIub25lcnJvciA9ICgpID0+IHtcbiAgICAgIHJlamVjdChyZWFkZXIuZXJyb3IpO1xuICAgIH07XG4gIH0pO1xufTtcblxuIl19

!function o(r,i,s){function a(e,t){if(!i[e]){if(!r[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(l)return l(e,!0);throw(n=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",n}n=i[e]={exports:{}},r[e][0].call(n.exports,function(t){return a(r[e][1][t]||t)},n,n.exports,o,r,i,s)}return i[e].exports}for(var l="function"==typeof require&&require,t=0;t<s.length;t++)a(s[t]);return a}({1:[function(t,e,n){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var r=o(t("./people")),t=(Object.defineProperty(i.prototype,"cur",{get:function(){return null===this.prev&&null!==this.next?this.next-1:null!==this.prev&&null===this.next||null!==this.prev&&null!==this.next?this.prev+1:-1},enumerable:!1,configurable:!0}),i.parsePage=function(t){return new i(t)},i.defaultPage=function(){return new i({previous:null,next:null,results:[]})},i.getPageNum=function(t){if(null===t)return null;t=t.match(/(?<=page=)[0-9]+/);return null===t?null:Number(t)},i);function i(t){this.prev=i.getPageNum(t.previous),this.next=i.getPageNum(t.next),this.peoples=r.default.parsePeoples(t.results)}n.default=t},{"./people":2}],2:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=(r.parsePeoples=function(t){return t.map(function(t){return new r(t)})},r.fixNum=function(t){t=Number(t.replace(",","."));return Number.isNaN(t)?-1:t},r);function r(t){this.name=t.name,this.height=r.fixNum(t.height),this.mass=r.fixNum(t.mass),this.gender=t.gender}n.default=o},{}],3:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../utils/dom"),t=(r.prototype.getElement=function(){return this.element||(this.element=(0,o.createElement)(this.getTemplate())),this.element},r.prototype.removeElement=function(){this.element=null},r);function r(){this.element=null}n.default=t},{"../utils/dom":14}],4:[function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var s,t=i(t("./abstract-component")),r=(s=t.default,r(a,s),a.prototype.getTemplate=function(){return'<div class="table__loading"><div></div><div></div><div></div>'},a);function a(){return s.call(this)||this}n.default=r},{"./abstract-component":3}],5:[function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var s,i=i(t("./abstract-component")),a=t("../utils/dom"),r=(s=i.default,r(l,s),Object.defineProperty(l.prototype,"curNum",{set:function(t){this.curNumSpan.textContent=t.toString()},enumerable:!1,configurable:!0}),l.prototype.disablePrevButton=function(){this.prevButton.disabled=!0},l.prototype.disableNextButton=function(){this.nextButton.disabled=!0},l.prototype.enablePrevButton=function(){this.prevButton.disabled=!1},l.prototype.enableNextButton=function(){this.nextButton.disabled=!1},l.prototype.onNavClick=function(t){t.preventDefault();t=t.target;if("BUTTON"===t.nodeName)switch(t.dataset.value){case"PREV":this.onPrevBtnClick();break;case"NEXT":this.onNextBtnClick()}},l.prototype.getTemplate=function(){return'<nav class="table__nav" >\n                <button class="table__nav-btn table__nav-btn--prev" data-value="PREV" disabled>Prev</button>\n                <p class="table__nav-page">Page: <span class="table__nav-num"></span></p>\n                <button class="table__nav-btn table__nav-btn--next" data-value="NEXT" disabled>Next</button>\n            </nav>'},l);function l(t){var e=t.num,n=t.onPrevBtnClick,t=t.onNextBtnClick,o=s.call(this)||this;return o.prevButton=(0,a.safeQuery)(o.getElement(),".table__nav-btn--prev"),o.nextButton=(0,a.safeQuery)(o.getElement(),".table__nav-btn--next"),o.curNumSpan=(0,a.safeQuery)(o.getElement(),".table__nav-num"),o.onPrevBtnClick=n,o.onNextBtnClick=t,o.curNum=e,o.getElement().addEventListener("click",function(t){return o.onNavClick(t)}),o}n.default=r},{"../utils/dom":14,"./abstract-component":3}],6:[function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var s,t=i(t("./abstract-component")),r=(s=t.default,r(a,s),a.prototype.getTemplate=function(){return'<li class="people">\n              <p class="people__prop people__prop--name">'+this.name+'</p>\n              <p class="people__prop people__prop--height">'+this.height+'</p>\n              <p class="people__prop people__prop--mass">'+this.mass+'</p>\n              <p class="people__prop people__prop--gender">'+this.gender+"</p>\n            </li>"},a);function a(t){var e=t.name,n=void 0===e?"unknown":e,o=t.height,r=void 0===o?-1:o,e=t.mass,o=void 0===e?-1:e,e=t.gender,t=void 0===e?"unknown":e,e=s.call(this)||this;return e.name=n,e.height=r,e.mass=o,e.gender=t,e}n.default=r},{"./abstract-component":3}],7:[function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var s,i=i(t("./abstract-component")),a=t("../utils/dom"),r=(s=i.default,r(l,s),l.prototype.onSortFormClick=function(t){t=t.target;"LABEL"===t.nodeName&&(t=(0,a.safeQuery)(this.getElement(),"#"+t.htmlFor),this.sortType=t.dataset.sortType,this.onSortTypeChange(this.sortType))},l.prototype.getTemplate=function(){return'<form class="table__sort sort" method="get" action="#">\n              <div class="sort__item">\n                <input class="sort__input visually-hidden" id="sort-name" type="radio" name="sort" value="NAME" data-sort-type="NAME">\n                <label class="sort__label" for="sort-name">Name</label>\n              </div>\n\n              <div class="sort__item">\n                <input class="sort__input visually-hidden" id="sort-height" type="radio" name="sort" value="HEIGHT" data-sort-type="HEIGHT">\n                <label class="sort__label" for="sort-height">Height</label>\n              </div>\n\n              <div class="sort__item">\n                <input class="sort__input visually-hidden" id="sort-mass" type="radio" name="sort" value="MASS" data-sort-type="MASS">\n                <label class="sort__label" for="sort-mass">Mass</label>\n              </div>\n\n              <div class="sort__item">\n                <input class="sort__input visually-hidden" id="sort-gender" type="radio" name="sort" value="GENDER" data-sort-type="GENDER">\n                <label class="sort__label" for="sort-gender">Gender</label>\n              </div>\n            </form>'},l);function l(t){var e=t.sortType,t=t.onSortTypeChange,n=s.call(this)||this;return n.sortType=e,n.onSortTypeChange=t,(0,a.safeQuery)(n.getElement(),'[data-sort-type="'+n.sortType+'"]').checked=!0,n.getElement().addEventListener("click",function(t){return n.onSortFormClick(t)}),n}n.default=r},{"../utils/dom":14,"./abstract-component":3}],8:[function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var s,i=i(t("./abstract-component")),a=t("../utils/dom"),r=(s=i.default,r(l,s),Object.defineProperty(l.prototype,"tableList",{get:function(){return(0,a.safeQuery)(this.getElement(),".table__peoples")},enumerable:!1,configurable:!0}),l.prototype.block=function(){this.getElement().classList.add("table--loading")},l.prototype.unblock=function(){this.getElement().classList.remove("table--loading")},l.prototype.getTemplate=function(){return'<section class="table">\n              <ul class="table__peoples"></ul>\n            </section>'},l);function l(){return s.call(this)||this}n.default=r},{"../utils/dom":14,"./abstract-component":3}],9:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default={tableStartPage:1}},{}],10:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default={endPoint:"https://swapi.dev/api/people"}},{}],11:[function(t,e,n){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var r=o(t("../components/table")),i=o(t("../components/sort-view")),s=o(t("../components/people")),a=o(t("../components/navigation")),l=o(t("../components/loading-view")),u=t("../utils/dom"),p=o(t("../adapters/page")),t=(c.prototype.setPage=function(t){this.page=t,this.nav.curNum=this.page.cur,this.loadingModOFF(),this.sort(),this.update()},c.prototype.loadingModOFF=function(){null!==this.page.prev&&this.nav.enablePrevButton(),null!==this.page.next&&this.nav.enableNextButton(),(0,u.unmount)(this.loadView.getElement()),this.table.unblock()},c.prototype.init=function(){(0,u.render)(this.container,this.table.getElement(),"AFTERBEGIN"),(0,u.render)(this.table.getElement(),this.sortView.getElement(),"AFTERBEGIN"),(0,u.render)(this.table.getElement(),this.nav.getElement(),"BEFOREEND"),this.loadingModON()},c.prototype.onSortTypeChange=function(t){this.sortType===t?this.toggleSortMod():this.sortType=t,this.sort(),this.update()},c.prototype.toggleSortMod=function(){"UP"!==this.sortMod?this.sortMod="UP":this.sortMod="DOWN"},c.prototype.sort=function(){var r=this;this.page.peoples.sort(function(t,e){var n,o;switch(r.sortType){case"NAME":n=t.name.toLowerCase(),o=e.name.toLowerCase();break;case"GENDER":n=t.gender.toLowerCase(),o=e.gender.toLowerCase();break;case"HEIGHT":n=t.height,o=e.height;break;case"MASS":n=t.mass,o=e.mass}return o<n?1:n<o?-1:0}),"UP"===this.sortMod&&this.page.peoples.reverse()},c.prototype.loadingModON=function(){this.nav.disableNextButton(),this.nav.disablePrevButton(),(0,u.render)(this.table.getElement(),this.loadView.getElement(),"AFTERBEGIN"),this.table.block()},c.prototype.onNavPrevClick=function(){null!==this.page.prev&&(this.loadingModON(),this.onPageChange(this.page.prev))},c.prototype.onNavNextClick=function(){null!==this.page.next&&(this.loadingModON(),this.onPageChange(this.page.next))},c.prototype.update=function(){var e=this;this.table.tableList.innerHTML="",this.page.peoples.forEach(function(t){(0,u.render)(e.table.tableList,new s.default(t).getElement(),"BEFOREEND")})},c);function c(t,e){this.container=t,this.onPageChange=e,this.page=p.default.defaultPage(),this.table=new r.default,this.sortType="NAME",this.sortMod="DOWN",this.sortView=new i.default({sortType:this.sortType,onSortTypeChange:this.onSortTypeChange.bind(this)}),this.nav=new a.default({num:-1,onPrevBtnClick:this.onNavPrevClick.bind(this),onNextBtnClick:this.onNavNextClick.bind(this)}),this.loadView=new l.default,this.init()}n.default=t},{"../adapters/page":1,"../components/loading-view":4,"../components/navigation":5,"../components/people":6,"../components/sort-view":7,"../components/table":8,"../utils/dom":14}],12:[function(t,e,n){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var r=o(t("./server/api")),i=o(t("./controllers/table-controller")),n=o(t("./configs/serverConfig")),t=o(t("./configs/appConfig")),s=new r.default(n.default),n=document.querySelector("#root");if(null===n)throw new Error("Can't find root node");var a=new i.default(n,function(t){s.getPage(t).then(function(t){a.setPage(t)}).catch(function(){alert("Connection error"),a.loadingModOFF()})});s.getPage(t.default.tableStartPage).then(function(t){a.setPage(t)})},{"./configs/appConfig":9,"./configs/serverConfig":10,"./controllers/table-controller":11,"./server/api":13}],13:[function(t,e,n){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var r=o(t("../adapters/page")),t=(i.prototype.getPage=function(t){return this.load({url:"?page="+t}).then(function(t){return t.json()}).then(function(t){return r.default.parsePage(t)})},i.prototype.load=function(t){var e=t.url,t=t.method;return fetch(this.endPoint+"/"+(void 0===e?"":e),{method:void 0===t?"GET":t}).then(function(t){if(200<=t.status&&t.status<300)return t;throw new Error(t.status+": "+t.statusText)}).catch(function(t){throw t})},i);function i(t){t=t.endPoint;this.endPoint=void 0===t?"":t}n.default=t},{"../adapters/page":1}],14:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.unmount=n.render=n.safeQuery=n.createElement=void 0;n.createElement=function(t,e){e="DEFAULT"===(e=void 0===e?"DEFAULT":e)?document.createElement("div"):document.createElement("tbody");if(e.innerHTML=t,null===e.firstChild)throw new Error("Can't create correct element");return e.firstChild};n.safeQuery=function(t,e){e=t.querySelector(e);if(null===e)throw new Error("Element not found");return e};n.render=function(t,e,n){switch(n){case"AFTERBEGIN":t.prepend(e);break;case"BEFOREEND":t.append(e)}};n.unmount=function(t){t&&t.remove()}},{}]},{},[12]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvYWRhcHRlcnMvcGFnZS50cyIsInNyYy9qcy9hZGFwdGVycy9wZW9wbGUudHMiLCJzcmMvanMvY29tcG9uZW50cy9hYnN0cmFjdC1jb21wb25lbnQudHMiLCJzcmMvanMvY29tcG9uZW50cy9sb2FkaW5nLXZpZXcudHMiLCJzcmMvanMvY29tcG9uZW50cy9uYXZpZ2F0aW9uLnRzIiwic3JjL2pzL2NvbXBvbmVudHMvcGVvcGxlLnRzIiwic3JjL2pzL2NvbXBvbmVudHMvc29ydC12aWV3LnRzIiwic3JjL2pzL2NvbXBvbmVudHMvdGFibGUudHMiLCJzcmMvanMvY29uZmlncy9hcHBDb25maWcudHMiLCJzcmMvanMvY29uZmlncy9zZXJ2ZXJDb25maWcudHMiLCJzcmMvanMvY29udHJvbGxlcnMvdGFibGUtY29udHJvbGxlci50cyIsInNyYy9qcy9tYWluLnRzIiwic3JjL2pzL3NlcnZlci9hcGkudHMiLCJzcmMvanMvdXRpbHMvZG9tLnRzIl0sIm5hbWVzIjpbInIiLCJlIiwibiIsInQiLCJvIiwiaSIsImYiLCJjIiwicmVxdWlyZSIsInUiLCJhIiwiRXJyb3IiLCJjb2RlIiwicCIsImV4cG9ydHMiLCJjYWxsIiwibGVuZ3RoIiwiMSIsIm1vZHVsZSIsInBlb3BsZV8xIiwiX19pbXBvcnREZWZhdWx0IiwiUGFnZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwicHJvdG90eXBlIiwidGhpcyIsInByZXYiLCJuZXh0IiwicGFyc2VQYWdlIiwiZGF0YSIsImRlZmF1bHRQYWdlIiwicHJldmlvdXMiLCJyZXN1bHRzIiwiZ2V0UGFnZU51bSIsInN0ciIsInJlcyIsIm1hdGNoIiwiTnVtYmVyIiwicGVvcGxlcyIsImRlZmF1bHQiLCJwYXJzZVBlb3BsZXMiLCJQZW9wbGUiLCJtYXAiLCJwZW9wbGUiLCJmaXhOdW0iLCJudW0iLCJyZXBsYWNlIiwiaXNOYU4iLCJuYW1lIiwiaGVpZ2h0IiwibWFzcyIsImdlbmRlciIsImRvbV8xIiwiQWJzdHJhY3RDb21wb25lbnQiLCJnZXRFbGVtZW50IiwiZWxlbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJnZXRUZW1wbGF0ZSIsInJlbW92ZUVsZW1lbnQiLCJfc3VwZXIiLCJhYnN0cmFjdF9jb21wb25lbnRfMSIsIkxvYWRpbmdWaWV3IiwiX19leHRlbmRzIiwiTmF2aWdhdGlvbiIsImN1ck51bVNwYW4iLCJ0ZXh0Q29udGVudCIsInRvU3RyaW5nIiwiZGlzYWJsZVByZXZCdXR0b24iLCJwcmV2QnV0dG9uIiwiZGlzYWJsZWQiLCJkaXNhYmxlTmV4dEJ1dHRvbiIsIm5leHRCdXR0b24iLCJlbmFibGVQcmV2QnV0dG9uIiwiZW5hYmxlTmV4dEJ1dHRvbiIsIm9uTmF2Q2xpY2siLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsInRhcmdldCIsIm5vZGVOYW1lIiwiZGF0YXNldCIsInZhbHVlIiwib25QcmV2QnRuQ2xpY2siLCJvbk5leHRCdG5DbGljayIsIl9hIiwiX3RoaXMiLCJzYWZlUXVlcnkiLCJjdXJOdW0iLCJhZGRFdmVudExpc3RlbmVyIiwiX2IiLCJfYyIsIl9kIiwiX2UiLCJTb3J0VmlldyIsIm9uU29ydEZvcm1DbGljayIsImlucHV0IiwiaHRtbEZvciIsInNvcnRUeXBlIiwib25Tb3J0VHlwZUNoYW5nZSIsImNoZWNrZWQiLCJUYWJsZSIsImJsb2NrIiwiY2xhc3NMaXN0IiwiYWRkIiwidW5ibG9jayIsInJlbW92ZSIsInRhYmxlU3RhcnRQYWdlIiwiZW5kUG9pbnQiLCJ0YWJsZV8xIiwic29ydF92aWV3XzEiLCJuYXZpZ2F0aW9uXzEiLCJsb2FkaW5nX3ZpZXdfMSIsInBhZ2VfMSIsIlRhYmxlQ29udHJvbGxlciIsInNldFBhZ2UiLCJwYWdlIiwibmF2IiwiY3VyIiwibG9hZGluZ01vZE9GRiIsInNvcnQiLCJ1cGRhdGUiLCJ1bm1vdW50IiwibG9hZFZpZXciLCJ0YWJsZSIsImluaXQiLCJyZW5kZXIiLCJjb250YWluZXIiLCJzb3J0VmlldyIsImxvYWRpbmdNb2RPTiIsIm5ld1R5cGUiLCJ0b2dnbGVTb3J0TW9kIiwic29ydE1vZCIsImIiLCJsZWZ0IiwicmlnaHQiLCJ0b0xvd2VyQ2FzZSIsInJldmVyc2UiLCJvbk5hdlByZXZDbGljayIsIm9uUGFnZUNoYW5nZSIsIm9uTmF2TmV4dENsaWNrIiwidGFibGVMaXN0IiwiaW5uZXJIVE1MIiwiZm9yRWFjaCIsImJpbmQiLCJhcGlfMSIsInRhYmxlX2NvbnRyb2xsZXJfMSIsInNlcnZlckNvbmZpZ18xIiwiYXBwQ29uZmlnXzEiLCJhcGkiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ0YWJsZUNvbnRyb2xsZXIiLCJwYWdlTnVtIiwiZ2V0UGFnZSIsInRoZW4iLCJjYXRjaCIsImFsZXJ0IiwiQXBpIiwibG9hZCIsInVybCIsInJlc3BvbnNlIiwianNvbiIsImpzb25EYXRhIiwibWV0aG9kIiwiZmV0Y2giLCJzdGF0dXMiLCJzdGF0dXNUZXh0IiwiZXJyIiwidGVtcGxhdGUiLCJ0eXBlIiwibmV3RWxlbWVudCIsImZpcnN0Q2hpbGQiLCJzZWxlY3RvciIsInBsYWNlIiwicHJlcGVuZCIsImFwcGVuZCJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBQUEsRUFBQUMsRUFBQUMsRUFBQUMsR0FBQSxTQUFBQyxFQUFBQyxFQUFBQyxHQUFBLElBQUFKLEVBQUFHLEdBQUEsQ0FBQSxJQUFBSixFQUFBSSxHQUFBLENBQUEsSUFBQUUsRUFBQSxtQkFBQUMsU0FBQUEsUUFBQSxJQUFBRixHQUFBQyxFQUFBLE9BQUFBLEVBQUFGLEdBQUEsR0FBQSxHQUFBSSxFQUFBLE9BQUFBLEVBQUFKLEdBQUEsR0FBQSxNQUFBSyxFQUFBLElBQUFDLE1BQUEsdUJBQUFOLEVBQUEsTUFBQU8sS0FBQSxtQkFBQUYsRUFBQUcsRUFBQVgsRUFBQUcsR0FBQSxDQUFBUyxRQUFBLElBQUFiLEVBQUFJLEdBQUEsR0FBQVUsS0FBQUYsRUFBQUMsUUFBQSxTQUFBZCxHQUFBLE9BQUFJLEVBQUFILEVBQUFJLEdBQUEsR0FBQUwsSUFB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QUN3QyxFQUF3QjhDLEdBQzFDeEksRUFBNkIwRixFQUFVd0IsY0FBY3NCLEdBQzNELEdBQVksT0FBUnhJLEVBQ0YsTUFBTSxJQUFJeEIsTUFBTSxxQkFHbEIsT0FBT3dCLEdBR0lyQixFQUFBOEcsT0FBUyxTQUFDQyxFQUF3QnRFLEVBQXNCcUgsR0FDbkUsT0FBUUEsR0FDTixJQUFBLGFBQ0UvQyxFQUFVZ0QsUUFBUXRILEdBQ2xCLE1BQ0YsSUFBQSxZQUNFc0UsRUFBVWlELE9BQU92SCxLQVFWekMsRUFBQTBHLFFBQVUsU0FBQ2pFLEdBQ2xCQSxHQUNGQSxFQUFRaUQiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsImltcG9ydCBQZW9wbGUgZnJvbSBcIi4vcGVvcGxlXCI7XG5pbXBvcnQge0lQYWdlLCBJUGVvcGxlLCBOdWxsYWJsZSwgUGFnZURhdGF9IGZyb20gXCIuLi90eXBlc1wiO1xuXG5cbmNsYXNzIFBhZ2UgaW1wbGVtZW50cyBJUGFnZSB7XG4gIHByZXY6IE51bGxhYmxlPG51bWJlcj47XG4gIG5leHQ6IE51bGxhYmxlPG51bWJlcj47XG4gIHBlb3BsZXM6IEFycmF5PElQZW9wbGU+O1xuXG4gIGNvbnN0cnVjdG9yKGRhdGE6IFBhZ2VEYXRhKSB7XG4gICAgdGhpcy5wcmV2ID0gUGFnZS5nZXRQYWdlTnVtKGRhdGFbYHByZXZpb3VzYF0pO1xuICAgIHRoaXMubmV4dCA9IFBhZ2UuZ2V0UGFnZU51bShkYXRhW2BuZXh0YF0pO1xuICAgIHRoaXMucGVvcGxlcyA9IFBlb3BsZS5wYXJzZVBlb3BsZXMoZGF0YVtgcmVzdWx0c2BdKTtcbiAgfVxuXG4gIGdldCBjdXIoKTogbnVtYmVyIHtcbiAgICBpZiAodGhpcy5wcmV2ID09PSBudWxsICYmIHRoaXMubmV4dCAhPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHRoaXMubmV4dCAtIDE7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucHJldiAhPT0gbnVsbCAmJiB0aGlzLm5leHQgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiB0aGlzLnByZXYgKyAxO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnByZXYgIT09IG51bGwgJiYgdGhpcy5uZXh0ICE9PSBudWxsKSB7XG4gICAgICByZXR1cm4gdGhpcy5wcmV2ICsgMTtcbiAgICB9XG5cbiAgICByZXR1cm4gLTE7XG4gIH1cblxuICBzdGF0aWMgcGFyc2VQYWdlKGRhdGE6IFBhZ2VEYXRhKTogSVBhZ2Uge1xuICAgIHJldHVybiBuZXcgUGFnZShkYXRhKTtcbiAgfVxuXG4gIHN0YXRpYyBkZWZhdWx0UGFnZSgpOiBJUGFnZSB7XG4gICAgcmV0dXJuIG5ldyBQYWdlKHtcbiAgICAgIHByZXZpb3VzOiBudWxsLFxuICAgICAgbmV4dDogbnVsbCxcbiAgICAgIHJlc3VsdHM6IFtdXG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHN0YXRpYyBnZXRQYWdlTnVtKHN0cjogTnVsbGFibGU8c3RyaW5nPik6IE51bGxhYmxlPG51bWJlcj4ge1xuICAgIGlmIChzdHIgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCByZXMgPSBzdHIubWF0Y2goLyg/PD1wYWdlPSlbMC05XSsvKTtcblxuICAgIHJldHVybiAocmVzID09PSBudWxsKSA/IG51bGwgOiBOdW1iZXIocmVzKTtcbiAgfVxufVxuXG5cbmV4cG9ydCBkZWZhdWx0IFBhZ2U7XG4iLCJpbXBvcnQge0lQZW9wbGUsIFBlb3BsZURhdGEsIFBlb3BsZXNEYXRhfSBmcm9tIFwiLi4vdHlwZXNcIjtcblxuXG5jbGFzcyBQZW9wbGUgaW1wbGVtZW50cyBJUGVvcGxlIHtcbiAgbmFtZTogc3RyaW5nO1xuICBoZWlnaHQ6IG51bWJlcjtcbiAgbWFzczogbnVtYmVyO1xuICBnZW5kZXI6IHN0cmluZztcblxuICBjb25zdHJ1Y3RvcihkYXRhOiBQZW9wbGVEYXRhKSB7XG4gICAgdGhpcy5uYW1lID0gZGF0YVtgbmFtZWBdO1xuICAgIHRoaXMuaGVpZ2h0ID0gUGVvcGxlLmZpeE51bShkYXRhW2BoZWlnaHRgXSk7XG4gICAgdGhpcy5tYXNzID0gUGVvcGxlLmZpeE51bShkYXRhW2BtYXNzYF0pO1xuICAgIHRoaXMuZ2VuZGVyID0gZGF0YVtgZ2VuZGVyYF07XG4gIH1cblxuICBzdGF0aWMgcGFyc2VQZW9wbGVzKHBlb3BsZXM6IFBlb3BsZXNEYXRhKTogQXJyYXk8SVBlb3BsZT4ge1xuICAgIHJldHVybiBwZW9wbGVzLm1hcCgocGVvcGxlOiBQZW9wbGVEYXRhKTogSVBlb3BsZSA9PiBuZXcgUGVvcGxlKHBlb3BsZSkpO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgZml4TnVtKHN0cjogc3RyaW5nKTogbnVtYmVyIHtcbiAgICBjb25zdCBudW0gPSBOdW1iZXIoc3RyLnJlcGxhY2UoYCxgLCBgLmApKTtcbiAgICBpZiAoIU51bWJlci5pc05hTihudW0pKSB7XG4gICAgICByZXR1cm4gbnVtO1xuICAgIH1cblxuICAgIHJldHVybiAtMTtcbiAgfVxufVxuXG5cbmV4cG9ydCBkZWZhdWx0IFBlb3BsZTtcbiIsImltcG9ydCB7Y3JlYXRlRWxlbWVudH0gZnJvbSAnLi4vdXRpbHMvZG9tJztcbmltcG9ydCB7SUFic3RyYWN0Q29tcG9uZW50LCBOdWxsYWJsZX0gZnJvbSBcIi4uL3R5cGVzXCI7XG5cblxuYWJzdHJhY3QgY2xhc3MgQWJzdHJhY3RDb21wb25lbnQgaW1wbGVtZW50cyBJQWJzdHJhY3RDb21wb25lbnQge1xuICBwcml2YXRlIGVsZW1lbnQ6IE51bGxhYmxlPEhUTUxFbGVtZW50PjtcblxuICBwcm90ZWN0ZWQgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5lbGVtZW50ID0gbnVsbDtcbiAgfVxuXG4gIGdldEVsZW1lbnQoKTogSFRNTEVsZW1lbnQge1xuICAgIGlmICghdGhpcy5lbGVtZW50KSB7XG4gICAgICB0aGlzLmVsZW1lbnQgPSBjcmVhdGVFbGVtZW50KHRoaXMuZ2V0VGVtcGxhdGUoKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuZWxlbWVudDtcbiAgfVxuXG4gIHJlbW92ZUVsZW1lbnQoKTogdm9pZCB7XG4gICAgdGhpcy5lbGVtZW50ID0gbnVsbDtcbiAgfVxuXG4gIHByb3RlY3RlZCBhYnN0cmFjdCBnZXRUZW1wbGF0ZSgpOiBzdHJpbmdcbn1cblxuXG5leHBvcnQgZGVmYXVsdCBBYnN0cmFjdENvbXBvbmVudDtcbiIsImltcG9ydCBBYnN0cmFjdENvbXBvbmVudCBmcm9tIFwiLi9hYnN0cmFjdC1jb21wb25lbnRcIjtcbmltcG9ydCB7SUxvYWRpbmdWaWV3fSBmcm9tIFwiLi4vdHlwZXNcIjtcblxuXG5jbGFzcyBMb2FkaW5nVmlldyBleHRlbmRzIEFic3RyYWN0Q29tcG9uZW50IGltcGxlbWVudHMgSUxvYWRpbmdWaWV3IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBnZXRUZW1wbGF0ZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBgPGRpdiBjbGFzcz1cInRhYmxlX19sb2FkaW5nXCI+PGRpdj48L2Rpdj48ZGl2PjwvZGl2PjxkaXY+PC9kaXY+YDtcbiAgfVxufVxuXG5cbmV4cG9ydCBkZWZhdWx0IExvYWRpbmdWaWV3O1xuIiwiaW1wb3J0IEFic3RyYWN0Q29tcG9uZW50IGZyb20gXCIuL2Fic3RyYWN0LWNvbXBvbmVudFwiO1xuaW1wb3J0IHtJTmF2aWdhdGlvbiwgTmF2LCBUYWdOYW1lfSBmcm9tIFwiLi4vdHlwZXNcIjtcbmltcG9ydCB7c2FmZVF1ZXJ5fSBmcm9tIFwiLi4vdXRpbHMvZG9tXCI7XG5cblxuY2xhc3MgTmF2aWdhdGlvbiBleHRlbmRzIEFic3RyYWN0Q29tcG9uZW50IGltcGxlbWVudHMgSU5hdmlnYXRpb24ge1xuICBwcml2YXRlIHByZXZCdXR0b246IEhUTUxCdXR0b25FbGVtZW50XG4gIHByaXZhdGUgbmV4dEJ1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnRcbiAgcHJpdmF0ZSBjdXJOdW1TcGFuOiBIVE1MU3BhbkVsZW1lbnRcbiAgcHJpdmF0ZSByZWFkb25seSBvblByZXZCdG5DbGljazogKCkgPT4gdm9pZFxuICBwcml2YXRlIHJlYWRvbmx5IG9uTmV4dEJ0bkNsaWNrOiAoKSA9PiB2b2lkXG5cbiAgY29uc3RydWN0b3Ioe251bSwgb25QcmV2QnRuQ2xpY2ssIG9uTmV4dEJ0bkNsaWNrfToge251bTogbnVtYmVyLCBvblByZXZCdG5DbGljazogKCkgPT4gdm9pZCwgb25OZXh0QnRuQ2xpY2s6ICgpID0+IHZvaWR9KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLnByZXZCdXR0b24gPSBzYWZlUXVlcnkodGhpcy5nZXRFbGVtZW50KCksIGAudGFibGVfX25hdi1idG4tLXByZXZgKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcbiAgICB0aGlzLm5leHRCdXR0b24gPSBzYWZlUXVlcnkodGhpcy5nZXRFbGVtZW50KCksIGAudGFibGVfX25hdi1idG4tLW5leHRgKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcbiAgICB0aGlzLmN1ck51bVNwYW4gPSBzYWZlUXVlcnkodGhpcy5nZXRFbGVtZW50KCksIGAudGFibGVfX25hdi1udW1gKSBhcyBIVE1MU3BhbkVsZW1lbnQ7XG5cbiAgICB0aGlzLm9uUHJldkJ0bkNsaWNrID0gb25QcmV2QnRuQ2xpY2s7XG4gICAgdGhpcy5vbk5leHRCdG5DbGljayA9IG9uTmV4dEJ0bkNsaWNrO1xuXG4gICAgdGhpcy5jdXJOdW0gPSBudW07XG4gICAgdGhpcy5nZXRFbGVtZW50KCkuYWRkRXZlbnRMaXN0ZW5lcihgY2xpY2tgLCAoZXZ0OiBNb3VzZUV2ZW50KSA9PiB0aGlzLm9uTmF2Q2xpY2soZXZ0KSk7XG4gIH1cblxuICBzZXQgY3VyTnVtKG51bTogbnVtYmVyKSB7XG4gICAgdGhpcy5jdXJOdW1TcGFuLnRleHRDb250ZW50ID0gbnVtLnRvU3RyaW5nKCk7XG4gIH1cblxuICBkaXNhYmxlUHJldkJ1dHRvbigpIHtcbiAgICB0aGlzLnByZXZCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICB9XG5cbiAgZGlzYWJsZU5leHRCdXR0b24oKSB7XG4gICAgdGhpcy5uZXh0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgfVxuXG4gIGVuYWJsZVByZXZCdXR0b24oKSB7XG4gICAgdGhpcy5wcmV2QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gIH1cblxuICBlbmFibGVOZXh0QnV0dG9uKCkge1xuICAgIHRoaXMubmV4dEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICB9XG5cbiAgcHJpdmF0ZSBvbk5hdkNsaWNrKGV2dDogTW91c2VFdmVudCkge1xuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IHRhcmdldCA9IGV2dC50YXJnZXQgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XG5cbiAgICBpZiAodGFyZ2V0Lm5vZGVOYW1lICE9PSBUYWdOYW1lLkJVVFRPTikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHN3aXRjaCAodGFyZ2V0LmRhdGFzZXQudmFsdWUpIHtcbiAgICAgIGNhc2UgTmF2LlBSRVY6XG4gICAgICAgIHRoaXMub25QcmV2QnRuQ2xpY2soKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgTmF2Lk5FWFQ6XG4gICAgICAgIHRoaXMub25OZXh0QnRuQ2xpY2soKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgcHJvdGVjdGVkIGdldFRlbXBsYXRlKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGA8bmF2IGNsYXNzPVwidGFibGVfX25hdlwiID5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwidGFibGVfX25hdi1idG4gdGFibGVfX25hdi1idG4tLXByZXZcIiBkYXRhLXZhbHVlPVwiUFJFVlwiIGRpc2FibGVkPlByZXY8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8cCBjbGFzcz1cInRhYmxlX19uYXYtcGFnZVwiPlBhZ2U6IDxzcGFuIGNsYXNzPVwidGFibGVfX25hdi1udW1cIj48L3NwYW4+PC9wPlxuICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJ0YWJsZV9fbmF2LWJ0biB0YWJsZV9fbmF2LWJ0bi0tbmV4dFwiIGRhdGEtdmFsdWU9XCJORVhUXCIgZGlzYWJsZWQ+TmV4dDwvYnV0dG9uPlxuICAgICAgICAgICAgPC9uYXY+YDtcbiAgfVxufVxuXG5cbmV4cG9ydCBkZWZhdWx0IE5hdmlnYXRpb247XG4iLCJpbXBvcnQgQWJzdHJhY3RDb21wb25lbnQgZnJvbSBcIi4vYWJzdHJhY3QtY29tcG9uZW50XCI7XG5cblxuY2xhc3MgUGVvcGxlIGV4dGVuZHMgQWJzdHJhY3RDb21wb25lbnQge1xuICBwcml2YXRlIHJlYWRvbmx5IG5hbWU6IHN0cmluZztcbiAgcHJpdmF0ZSByZWFkb25seSBoZWlnaHQ6IG51bWJlcjtcbiAgcHJpdmF0ZSByZWFkb25seSBtYXNzOiBudW1iZXI7XG4gIHByaXZhdGUgcmVhZG9ubHkgZ2VuZGVyOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3Ioe25hbWUgPSBgdW5rbm93bmAsIGhlaWdodCA9IC0xLCBtYXNzID0gLTEsIGdlbmRlciA9IGB1bmtub3duYH0pIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcbiAgICB0aGlzLm1hc3MgPSBtYXNzO1xuICAgIHRoaXMuZ2VuZGVyID0gZ2VuZGVyO1xuICB9XG5cbiAgcHJvdGVjdGVkIGdldFRlbXBsYXRlKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGA8bGkgY2xhc3M9XCJwZW9wbGVcIj5cbiAgICAgICAgICAgICAgPHAgY2xhc3M9XCJwZW9wbGVfX3Byb3AgcGVvcGxlX19wcm9wLS1uYW1lXCI+JHt0aGlzLm5hbWV9PC9wPlxuICAgICAgICAgICAgICA8cCBjbGFzcz1cInBlb3BsZV9fcHJvcCBwZW9wbGVfX3Byb3AtLWhlaWdodFwiPiR7dGhpcy5oZWlnaHR9PC9wPlxuICAgICAgICAgICAgICA8cCBjbGFzcz1cInBlb3BsZV9fcHJvcCBwZW9wbGVfX3Byb3AtLW1hc3NcIj4ke3RoaXMubWFzc308L3A+XG4gICAgICAgICAgICAgIDxwIGNsYXNzPVwicGVvcGxlX19wcm9wIHBlb3BsZV9fcHJvcC0tZ2VuZGVyXCI+JHt0aGlzLmdlbmRlcn08L3A+XG4gICAgICAgICAgICA8L2xpPmA7XG4gIH1cbn1cblxuXG5leHBvcnQgZGVmYXVsdCBQZW9wbGU7XG4iLCJpbXBvcnQgQWJzdHJhY3RDb21wb25lbnQgZnJvbSBcIi4vYWJzdHJhY3QtY29tcG9uZW50XCI7XG5pbXBvcnQge1NvcnRUeXBlLCBUYWdOYW1lfSBmcm9tIFwiLi4vdHlwZXNcIjtcbmltcG9ydCB7c2FmZVF1ZXJ5fSBmcm9tIFwiLi4vdXRpbHMvZG9tXCI7XG5cblxuY2xhc3MgU29ydFZpZXcgZXh0ZW5kcyBBYnN0cmFjdENvbXBvbmVudCB7XG4gIHByaXZhdGUgc29ydFR5cGU6IFNvcnRUeXBlO1xuICBwcml2YXRlIHJlYWRvbmx5IG9uU29ydFR5cGVDaGFuZ2U6ICh0eXBlOiBTb3J0VHlwZSkgPT4gdm9pZDtcblxuICBjb25zdHJ1Y3Rvcih7c29ydFR5cGUsIG9uU29ydFR5cGVDaGFuZ2V9OiB7c29ydFR5cGU6IFNvcnRUeXBlLCBvblNvcnRUeXBlQ2hhbmdlOiAodHlwZTogU29ydFR5cGUpID0+IHZvaWR9KSB7XG4gICAgc3VwZXIoKTtcblxuICAgIHRoaXMuc29ydFR5cGUgPSBzb3J0VHlwZTtcbiAgICB0aGlzLm9uU29ydFR5cGVDaGFuZ2UgPSBvblNvcnRUeXBlQ2hhbmdlO1xuXG4gICAgY29uc3QgY3VyUmFkaW9CdXR0b24gPSBzYWZlUXVlcnkodGhpcy5nZXRFbGVtZW50KCksIGBbZGF0YS1zb3J0LXR5cGU9XCIke3RoaXMuc29ydFR5cGV9XCJdYCkgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICBjdXJSYWRpb0J1dHRvbi5jaGVja2VkID0gdHJ1ZTtcblxuICAgIHRoaXMuZ2V0RWxlbWVudCgpLmFkZEV2ZW50TGlzdGVuZXIoYGNsaWNrYCwgKGV2dDogTW91c2VFdmVudCkgPT4gdGhpcy5vblNvcnRGb3JtQ2xpY2soZXZ0KSk7XG4gIH1cblxuICBwcml2YXRlIG9uU29ydEZvcm1DbGljayhldnQ6IE1vdXNlRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldnQudGFyZ2V0IGFzIEhUTUxMYWJlbEVsZW1lbnQ7XG5cbiAgICBpZiAodGFyZ2V0Lm5vZGVOYW1lICE9PSBUYWdOYW1lLkxBQkVMKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgaW5wdXQgPSBzYWZlUXVlcnkodGhpcy5nZXRFbGVtZW50KCksIGAjJHt0YXJnZXQuaHRtbEZvcn1gKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgIHRoaXMuc29ydFR5cGUgPSBpbnB1dC5kYXRhc2V0LnNvcnRUeXBlIGFzIFNvcnRUeXBlO1xuICAgIHRoaXMub25Tb3J0VHlwZUNoYW5nZSh0aGlzLnNvcnRUeXBlKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBnZXRUZW1wbGF0ZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBgPGZvcm0gY2xhc3M9XCJ0YWJsZV9fc29ydCBzb3J0XCIgbWV0aG9kPVwiZ2V0XCIgYWN0aW9uPVwiI1wiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic29ydF9faXRlbVwiPlxuICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cInNvcnRfX2lucHV0IHZpc3VhbGx5LWhpZGRlblwiIGlkPVwic29ydC1uYW1lXCIgdHlwZT1cInJhZGlvXCIgbmFtZT1cInNvcnRcIiB2YWx1ZT1cIk5BTUVcIiBkYXRhLXNvcnQtdHlwZT1cIk5BTUVcIj5cbiAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJzb3J0X19sYWJlbFwiIGZvcj1cInNvcnQtbmFtZVwiPk5hbWU8L2xhYmVsPlxuICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic29ydF9faXRlbVwiPlxuICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cInNvcnRfX2lucHV0IHZpc3VhbGx5LWhpZGRlblwiIGlkPVwic29ydC1oZWlnaHRcIiB0eXBlPVwicmFkaW9cIiBuYW1lPVwic29ydFwiIHZhbHVlPVwiSEVJR0hUXCIgZGF0YS1zb3J0LXR5cGU9XCJIRUlHSFRcIj5cbiAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJzb3J0X19sYWJlbFwiIGZvcj1cInNvcnQtaGVpZ2h0XCI+SGVpZ2h0PC9sYWJlbD5cbiAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInNvcnRfX2l0ZW1cIj5cbiAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9XCJzb3J0X19pbnB1dCB2aXN1YWxseS1oaWRkZW5cIiBpZD1cInNvcnQtbWFzc1wiIHR5cGU9XCJyYWRpb1wiIG5hbWU9XCJzb3J0XCIgdmFsdWU9XCJNQVNTXCIgZGF0YS1zb3J0LXR5cGU9XCJNQVNTXCI+XG4gICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwic29ydF9fbGFiZWxcIiBmb3I9XCJzb3J0LW1hc3NcIj5NYXNzPC9sYWJlbD5cbiAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInNvcnRfX2l0ZW1cIj5cbiAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9XCJzb3J0X19pbnB1dCB2aXN1YWxseS1oaWRkZW5cIiBpZD1cInNvcnQtZ2VuZGVyXCIgdHlwZT1cInJhZGlvXCIgbmFtZT1cInNvcnRcIiB2YWx1ZT1cIkdFTkRFUlwiIGRhdGEtc29ydC10eXBlPVwiR0VOREVSXCI+XG4gICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwic29ydF9fbGFiZWxcIiBmb3I9XCJzb3J0LWdlbmRlclwiPkdlbmRlcjwvbGFiZWw+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9mb3JtPmA7XG4gIH1cbn1cblxuXG5leHBvcnQgZGVmYXVsdCBTb3J0VmlldztcbiIsImltcG9ydCBBYnN0cmFjdENvbXBvbmVudCBmcm9tIFwiLi9hYnN0cmFjdC1jb21wb25lbnRcIjtcbmltcG9ydCB7SVRhYmxlfSBmcm9tIFwiLi4vdHlwZXNcIjtcbmltcG9ydCB7c2FmZVF1ZXJ5fSBmcm9tIFwiLi4vdXRpbHMvZG9tXCI7XG5cblxuY2xhc3MgVGFibGUgZXh0ZW5kcyBBYnN0cmFjdENvbXBvbmVudCBpbXBsZW1lbnRzIElUYWJsZSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gIH1cblxuICBnZXQgdGFibGVMaXN0KCkge1xuICAgIHJldHVybiBzYWZlUXVlcnkodGhpcy5nZXRFbGVtZW50KCksIGAudGFibGVfX3Blb3BsZXNgKTtcbiAgfVxuXG4gIGJsb2NrKCk6IHZvaWQge1xuICAgIHRoaXMuZ2V0RWxlbWVudCgpLmNsYXNzTGlzdC5hZGQoYHRhYmxlLS1sb2FkaW5nYCk7XG4gIH1cblxuICB1bmJsb2NrKCk6IHZvaWQge1xuICAgIHRoaXMuZ2V0RWxlbWVudCgpLmNsYXNzTGlzdC5yZW1vdmUoYHRhYmxlLS1sb2FkaW5nYCk7XG4gIH1cblxuICBwcm90ZWN0ZWQgZ2V0VGVtcGxhdGUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYDxzZWN0aW9uIGNsYXNzPVwidGFibGVcIj5cbiAgICAgICAgICAgICAgPHVsIGNsYXNzPVwidGFibGVfX3Blb3BsZXNcIj48L3VsPlxuICAgICAgICAgICAgPC9zZWN0aW9uPmA7XG4gIH1cbn1cblxuXG5leHBvcnQgZGVmYXVsdCBUYWJsZTtcbiIsImNvbnN0IGFwcENvbmZpZyA9IHtcbiAgdGFibGVTdGFydFBhZ2U6IDFcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGFwcENvbmZpZztcbiIsImNvbnN0IHNlcnZlckNvbmZpZyA9IHtcbiAgZW5kUG9pbnQ6IGBodHRwczovL3N3YXBpLmRldi9hcGkvcGVvcGxlYFxufTtcblxuZXhwb3J0IGRlZmF1bHQgc2VydmVyQ29uZmlnO1xuIiwiaW1wb3J0IFRhYmxlIGZyb20gXCIuLi9jb21wb25lbnRzL3RhYmxlXCI7XG5pbXBvcnQgU29ydFZpZXcgZnJvbSBcIi4uL2NvbXBvbmVudHMvc29ydC12aWV3XCI7XG5pbXBvcnQgUGVvcGxlIGZyb20gXCIuLi9jb21wb25lbnRzL3Blb3BsZVwiO1xuaW1wb3J0IE5hdmlnYXRpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvbmF2aWdhdGlvblwiO1xuaW1wb3J0IExvYWRpbmdWaWV3IGZyb20gXCIuLi9jb21wb25lbnRzL2xvYWRpbmctdmlld1wiO1xuaW1wb3J0IHtyZW5kZXIsIHVubW91bnR9IGZyb20gXCIuLi91dGlscy9kb21cIjtcbmltcG9ydCB7SU5hdmlnYXRpb24sIElQYWdlLCBJUGVvcGxlLCBJVGFibGUsIElUYWJsZUNvbnRyb2xsZXIsIFBvc2l0aW9uLCBTb3J0TW9kLCBTb3J0VHlwZX0gZnJvbSBcIi4uL3R5cGVzXCI7XG5pbXBvcnQgUGFnZSBmcm9tIFwiLi4vYWRhcHRlcnMvcGFnZVwiO1xuXG5cbmNsYXNzIFRhYmxlQ29udHJvbGxlciBpbXBsZW1lbnRzIElUYWJsZUNvbnRyb2xsZXIge1xuICBwcml2YXRlIHJlYWRvbmx5IHRhYmxlOiBJVGFibGU7XG4gIHByaXZhdGUgcmVhZG9ubHkgc29ydFZpZXc6IFNvcnRWaWV3O1xuICBwcml2YXRlIHJlYWRvbmx5IG5hdjogSU5hdmlnYXRpb247XG4gIHByaXZhdGUgcmVhZG9ubHkgbG9hZFZpZXc6IExvYWRpbmdWaWV3O1xuXG4gIHByaXZhdGUgcGFnZTogSVBhZ2U7XG4gIHByaXZhdGUgc29ydFR5cGU6IFNvcnRUeXBlO1xuICBwcml2YXRlIHNvcnRNb2Q6IFNvcnRNb2Q7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSByZWFkb25seSBjb250YWluZXI6IEhUTUxFbGVtZW50LFxuICAgIHByaXZhdGUgcmVhZG9ubHkgb25QYWdlQ2hhbmdlOiAocGFnZU51bTogbnVtYmVyKSA9PiB2b2lkXG4gICkge1xuICAgIHRoaXMucGFnZSA9IFBhZ2UuZGVmYXVsdFBhZ2UoKTtcbiAgICB0aGlzLnRhYmxlID0gbmV3IFRhYmxlKCk7XG4gICAgdGhpcy5zb3J0VHlwZSA9IFNvcnRUeXBlLk5BTUU7XG4gICAgdGhpcy5zb3J0TW9kID0gU29ydE1vZC5ET1dOO1xuICAgIHRoaXMuc29ydFZpZXcgPSBuZXcgU29ydFZpZXcoe1xuICAgICAgc29ydFR5cGU6IHRoaXMuc29ydFR5cGUsXG4gICAgICBvblNvcnRUeXBlQ2hhbmdlOiB0aGlzLm9uU29ydFR5cGVDaGFuZ2UuYmluZCh0aGlzKVxuICAgIH0pO1xuICAgIHRoaXMubmF2ID0gbmV3IE5hdmlnYXRpb24oe1xuICAgICAgbnVtOiAtMSxcbiAgICAgIG9uUHJldkJ0bkNsaWNrOiB0aGlzLm9uTmF2UHJldkNsaWNrLmJpbmQodGhpcyksXG4gICAgICBvbk5leHRCdG5DbGljazogdGhpcy5vbk5hdk5leHRDbGljay5iaW5kKHRoaXMpXG4gICAgfSk7XG4gICAgdGhpcy5sb2FkVmlldyA9IG5ldyBMb2FkaW5nVmlldygpO1xuXG4gICAgdGhpcy5pbml0KCk7XG4gIH1cblxuICBzZXRQYWdlKHBhZ2U6IElQYWdlKTogdm9pZCB7XG4gICAgdGhpcy5wYWdlID0gcGFnZTtcbiAgICB0aGlzLm5hdi5jdXJOdW0gPSB0aGlzLnBhZ2UuY3VyO1xuICAgIHRoaXMubG9hZGluZ01vZE9GRigpO1xuICAgIHRoaXMuc29ydCgpO1xuICAgIHRoaXMudXBkYXRlKCk7XG4gIH1cblxuICBsb2FkaW5nTW9kT0ZGKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnBhZ2UucHJldiAhPT0gbnVsbCkge1xuICAgICAgdGhpcy5uYXYuZW5hYmxlUHJldkJ1dHRvbigpO1xuICAgIH1cbiAgICBpZiAodGhpcy5wYWdlLm5leHQgIT09IG51bGwpIHtcbiAgICAgIHRoaXMubmF2LmVuYWJsZU5leHRCdXR0b24oKTtcbiAgICB9XG5cbiAgICB1bm1vdW50KHRoaXMubG9hZFZpZXcuZ2V0RWxlbWVudCgpKTtcbiAgICB0aGlzLnRhYmxlLnVuYmxvY2soKTtcbiAgfVxuXG4gIHByaXZhdGUgaW5pdCgpOiB2b2lkIHtcbiAgICByZW5kZXIodGhpcy5jb250YWluZXIsIHRoaXMudGFibGUuZ2V0RWxlbWVudCgpLCBQb3NpdGlvbi5BRlRFUkJFR0lOKTtcbiAgICByZW5kZXIodGhpcy50YWJsZS5nZXRFbGVtZW50KCksIHRoaXMuc29ydFZpZXcuZ2V0RWxlbWVudCgpLCBQb3NpdGlvbi5BRlRFUkJFR0lOKTtcbiAgICByZW5kZXIodGhpcy50YWJsZS5nZXRFbGVtZW50KCksIHRoaXMubmF2LmdldEVsZW1lbnQoKSwgUG9zaXRpb24uQkVGT1JFRU5EKTtcblxuICAgIHRoaXMubG9hZGluZ01vZE9OKCk7XG4gIH1cblxuICBwcml2YXRlIG9uU29ydFR5cGVDaGFuZ2UobmV3VHlwZTogU29ydFR5cGUpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5zb3J0VHlwZSA9PT0gbmV3VHlwZSkge1xuICAgICAgdGhpcy50b2dnbGVTb3J0TW9kKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc29ydFR5cGUgPSBuZXdUeXBlO1xuICAgIH1cblxuICAgIHRoaXMuc29ydCgpO1xuICAgIHRoaXMudXBkYXRlKCk7XG4gIH1cblxuICBwcml2YXRlIHRvZ2dsZVNvcnRNb2QoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuc29ydE1vZCA9PT0gU29ydE1vZC5VUCkge1xuICAgICAgdGhpcy5zb3J0TW9kID0gU29ydE1vZC5ET1dOO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuc29ydE1vZCA9IFNvcnRNb2QuVVA7XG4gIH1cblxuICBwcml2YXRlIHNvcnQoKTogdm9pZCB7XG4gICAgdGhpcy5wYWdlLnBlb3BsZXMuc29ydCgoYTogSVBlb3BsZSwgYjogSVBlb3BsZSk6IG51bWJlciA9PiB7XG4gICAgICBsZXQgbGVmdDogbnVtYmVyIHwgc3RyaW5nO1xuICAgICAgbGV0IHJpZ2h0OiBudW1iZXIgfCBzdHJpbmc7XG5cbiAgICAgIHN3aXRjaCAodGhpcy5zb3J0VHlwZSkge1xuICAgICAgICBjYXNlIFNvcnRUeXBlLk5BTUU6XG4gICAgICAgICAgbGVmdCA9IGEubmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgIHJpZ2h0ID0gYi5uYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBTb3J0VHlwZS5HRU5ERVI6XG4gICAgICAgICAgbGVmdCA9IGEuZ2VuZGVyLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgcmlnaHQgPSBiLmdlbmRlci50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgU29ydFR5cGUuSEVJR0hUOlxuICAgICAgICAgIGxlZnQgPSBhLmhlaWdodDtcbiAgICAgICAgICByaWdodCA9IGIuaGVpZ2h0O1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgU29ydFR5cGUuTUFTUzpcbiAgICAgICAgICBsZWZ0ID0gYS5tYXNzO1xuICAgICAgICAgIHJpZ2h0ID0gYi5tYXNzO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBpZiAobGVmdCA+IHJpZ2h0KSB7XG4gICAgICAgIHJldHVybiAxO1xuICAgICAgfVxuICAgICAgaWYgKGxlZnQgPCByaWdodCkge1xuICAgICAgICByZXR1cm4gLTE7XG4gICAgICB9XG4gICAgICByZXR1cm4gMDtcbiAgICB9KTtcblxuICAgIGlmICh0aGlzLnNvcnRNb2QgPT09IFNvcnRNb2QuVVApIHtcbiAgICAgIHRoaXMucGFnZS5wZW9wbGVzLnJldmVyc2UoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGxvYWRpbmdNb2RPTigpOiB2b2lkIHtcbiAgICB0aGlzLm5hdi5kaXNhYmxlTmV4dEJ1dHRvbigpO1xuICAgIHRoaXMubmF2LmRpc2FibGVQcmV2QnV0dG9uKCk7XG4gICAgcmVuZGVyKHRoaXMudGFibGUuZ2V0RWxlbWVudCgpLCB0aGlzLmxvYWRWaWV3LmdldEVsZW1lbnQoKSwgUG9zaXRpb24uQUZURVJCRUdJTik7XG4gICAgdGhpcy50YWJsZS5ibG9jaygpO1xuICB9XG5cbiAgcHJpdmF0ZSBvbk5hdlByZXZDbGljaygpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5wYWdlLnByZXYgPT09IG51bGwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmxvYWRpbmdNb2RPTigpO1xuICAgIHRoaXMub25QYWdlQ2hhbmdlKHRoaXMucGFnZS5wcmV2KTtcbiAgfVxuXG4gIHByaXZhdGUgb25OYXZOZXh0Q2xpY2soKTogdm9pZCB7XG4gICAgaWYgKHRoaXMucGFnZS5uZXh0ID09PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5sb2FkaW5nTW9kT04oKTtcbiAgICB0aGlzLm9uUGFnZUNoYW5nZSh0aGlzLnBhZ2UubmV4dCk7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZSgpOiB2b2lkIHtcbiAgICB0aGlzLnRhYmxlLnRhYmxlTGlzdC5pbm5lckhUTUwgPSBgYDtcbiAgICB0aGlzLnBhZ2UucGVvcGxlcy5mb3JFYWNoKChwZW9wbGUpID0+IHtcbiAgICAgIHJlbmRlcih0aGlzLnRhYmxlLnRhYmxlTGlzdCwgbmV3IFBlb3BsZShwZW9wbGUpLmdldEVsZW1lbnQoKSwgUG9zaXRpb24uQkVGT1JFRU5EKTtcbiAgICB9KTtcbiAgfVxufVxuXG5cbmV4cG9ydCBkZWZhdWx0IFRhYmxlQ29udHJvbGxlcjtcbiIsImltcG9ydCBBcGkgZnJvbSBcIi4vc2VydmVyL2FwaVwiO1xuaW1wb3J0IFRhYmxlQ29udHJvbGxlciBmcm9tIFwiLi9jb250cm9sbGVycy90YWJsZS1jb250cm9sbGVyXCI7XG5pbXBvcnQgc2VydmVyQ29uZmlnIGZyb20gXCIuL2NvbmZpZ3Mvc2VydmVyQ29uZmlnXCI7XG5pbXBvcnQgYXBwQ29uZmlnIGZyb20gXCIuL2NvbmZpZ3MvYXBwQ29uZmlnXCI7XG5pbXBvcnQge0lBcGksIE51bGxhYmxlfSBmcm9tIFwiLi90eXBlc1wiO1xuXG5jb25zdCBhcGk6IElBcGkgPSBuZXcgQXBpKHNlcnZlckNvbmZpZyk7XG5jb25zdCBvblBhZ2VDaGFuZ2UgPSAocGFnZU51bTogbnVtYmVyKSA9PiB7XG4gIGFwaS5nZXRQYWdlKHBhZ2VOdW0pXG4gICAgLnRoZW4oKHBhZ2UpID0+IHtcbiAgICAgIHRhYmxlQ29udHJvbGxlci5zZXRQYWdlKHBhZ2UpO1xuICAgIH0pXG4gICAgLmNhdGNoKCgpID0+IHtcbiAgICAgIGFsZXJ0KGBDb25uZWN0aW9uIGVycm9yYCk7XG4gICAgICB0YWJsZUNvbnRyb2xsZXIubG9hZGluZ01vZE9GRigpO1xuICAgIH0pO1xufTtcblxuY29uc3QgY29udGFpbmVyOiBOdWxsYWJsZTxIVE1MRWxlbWVudD4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjcm9vdGApO1xuaWYgKGNvbnRhaW5lciA9PT0gbnVsbCkge1xuICB0aHJvdyBuZXcgRXJyb3IoYENhbid0IGZpbmQgcm9vdCBub2RlYCk7XG59XG5jb25zdCB0YWJsZUNvbnRyb2xsZXIgPSBuZXcgVGFibGVDb250cm9sbGVyKGNvbnRhaW5lciwgb25QYWdlQ2hhbmdlKTtcblxuYXBpLmdldFBhZ2UoYXBwQ29uZmlnLnRhYmxlU3RhcnRQYWdlKS50aGVuKChwYWdlKSA9PiB7XG4gIHRhYmxlQ29udHJvbGxlci5zZXRQYWdlKHBhZ2UpO1xufSk7XG5cbiIsImltcG9ydCBQYWdlIGZyb20gXCIuLi9hZGFwdGVycy9wYWdlXCI7XG5pbXBvcnQge0lBcGksIElQYWdlLCBNZXRob2QsIFBhZ2VEYXRhfSBmcm9tIFwiLi4vdHlwZXNcIjtcblxuXG5jbGFzcyBBcGkgaW1wbGVtZW50cyBJQXBpIHtcbiAgcHJpdmF0ZSBlbmRQb2ludDogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKHtlbmRQb2ludCA9IGBgfSkge1xuICAgIHRoaXMuZW5kUG9pbnQgPSBlbmRQb2ludDtcbiAgfVxuXG4gIGdldFBhZ2UocGFnZTogbnVtYmVyKTogUHJvbWlzZTxJUGFnZT4ge1xuICAgIHJldHVybiB0aGlzLmxvYWQoe3VybDogYD9wYWdlPSR7cGFnZX1gfSlcbiAgICAgIC50aGVuKChyZXNwb25zZTogUmVzcG9uc2UpOiBQcm9taXNlPFBhZ2VEYXRhPiA9PiByZXNwb25zZS5qc29uKCkpXG4gICAgICAudGhlbigoanNvbkRhdGE6IFBhZ2VEYXRhKTogSVBhZ2UgPT4gUGFnZS5wYXJzZVBhZ2UoanNvbkRhdGEpKTtcbiAgfVxuXG4gIHByaXZhdGUgbG9hZCh7dXJsID0gYGAsIG1ldGhvZCA9IE1ldGhvZC5HRVR9KTogUHJvbWlzZTxSZXNwb25zZT4ge1xuICAgIGNvbnN0IGNoZWNrU3RhdHVzID0gKHJlc3BvbnNlOiBSZXNwb25zZSkgPT4ge1xuICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA+PSAyMDAgJiYgcmVzcG9uc2Uuc3RhdHVzIDwgMzAwKSB7XG4gICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgJHtyZXNwb25zZS5zdGF0dXN9OiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmVuZFBvaW50fS8ke3VybH1gLCB7bWV0aG9kfSlcbiAgICAgIC50aGVuKGNoZWNrU3RhdHVzKVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgfSk7XG4gIH1cbn1cblxuXG5leHBvcnQgZGVmYXVsdCBBcGk7XG4iLCJpbXBvcnQge0VsZW1lbnRUeXBlLCBOdWxsYWJsZSwgUG9zaXRpb259IGZyb20gJy4uL3R5cGVzJztcblxuXG5leHBvcnQgY29uc3QgY3JlYXRlRWxlbWVudCA9ICh0ZW1wbGF0ZTogc3RyaW5nLCB0eXBlID0gRWxlbWVudFR5cGUuREVGQVVMVCk6IEhUTUxFbGVtZW50ID0+IHtcbiAgY29uc3QgbmV3RWxlbWVudCA9ICh0eXBlID09PSBFbGVtZW50VHlwZS5ERUZBVUxUKSA/XG4gICAgZG9jdW1lbnQuY3JlYXRlRWxlbWVudChgZGl2YCkgOlxuICAgIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYHRib2R5YCk7XG5cbiAgbmV3RWxlbWVudC5pbm5lckhUTUwgPSB0ZW1wbGF0ZTtcblxuICBpZiAobmV3RWxlbWVudC5maXJzdENoaWxkID09PSBudWxsKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBDYW4ndCBjcmVhdGUgY29ycmVjdCBlbGVtZW50YCk7XG4gIH1cblxuICByZXR1cm4gbmV3RWxlbWVudC5maXJzdENoaWxkIGFzIEhUTUxFbGVtZW50O1xufTtcblxuZXhwb3J0IGNvbnN0IHNhZmVRdWVyeSA9IChjb250YWluZXI6IEhUTUxFbGVtZW50LCBzZWxlY3Rvcjogc3RyaW5nKTogSFRNTEVsZW1lbnQgPT4ge1xuICBjb25zdCByZXM6IE51bGxhYmxlPEhUTUxFbGVtZW50PiA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgaWYgKHJlcyA9PT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBFcnJvcihgRWxlbWVudCBub3QgZm91bmRgKTtcbiAgfVxuXG4gIHJldHVybiByZXM7XG59O1xuXG5leHBvcnQgY29uc3QgcmVuZGVyID0gKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBwbGFjZTogUG9zaXRpb24pOiB2b2lkID0+IHtcbiAgc3dpdGNoIChwbGFjZSkge1xuICAgIGNhc2UgUG9zaXRpb24uQUZURVJCRUdJTjpcbiAgICAgIGNvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBQb3NpdGlvbi5CRUZPUkVFTkQ6XG4gICAgICBjb250YWluZXIuYXBwZW5kKGVsZW1lbnQpO1xuICAgICAgYnJlYWs7XG5cbiAgICBkZWZhdWx0OlxuICAgICAgYnJlYWs7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCB1bm1vdW50ID0gKGVsZW1lbnQ6IEhUTUxFbGVtZW50KTogdm9pZCA9PiB7XG4gIGlmIChlbGVtZW50KSB7XG4gICAgZWxlbWVudC5yZW1vdmUoKTtcbiAgfVxufTtcbiJdfQ==
